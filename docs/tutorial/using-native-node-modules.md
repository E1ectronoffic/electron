# Using Native Node Modules

Native Node.js modules are supported by Electron, but since Electron has a different
[application binary interface (ABI)][abi] from a given Node.js binary (due to
differences such as using Chromium's BoringSSL instead of OpenSSL), the native
modules you use will need to be recompiled for Electron. Otherwise,
you will get the following class of error when you try to run your app:

```sh

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Your account has been flagged.
Because of that, your profile is hidden from the public. If you believe this is a mistake, contact support to have your account status reviewed.
octocat /
Hello-World

1.7k
1.6k

    1.5k

Code
Issues 239
Pull requests 243
Actions
Projects
Wiki
Security

    Insights

tree #904
Open
zachrytwood opened this issue 5 days ago · 0 comments
Open
tree
#904
zachrytwood opened this issue 5 days ago · 0 comments
Comments
@zachrytwood
zachrytwood commented 5 days ago •

'##Run:
Command:
On:
run:
Request:
Launch:
$Gem:v3.1.10.9
$ bundle-with:dns.python.javascript
versioning:@v1.13.7
Bitcore.org.pkg.git((c)(r)).com/GITHUB_TOKEN
ghcr.io/mojojojo/((c)(r))com/BITORE
Backtrace:
Volume:21000000.00
rc:https://bitcore.org/https://USERNAME.TOKEN@bitcore.pkg.github.com/@iixix
Update_sources: 'true',
Verbose: 'true'.
Bundle: config{https://rubygems.pkg.github.com/OWNER_USERNAME: TOKEN_gem_build_BITORE.gemspec
$ gem
#Request:
#Push::
#Branches:--key github/host [mainbranch]{https://rubygems.pkg.github.com/OWNER/OCTO-GEM-0.1.1.gem.spec/rake.u
#PR:
#Branches: [trunk]
#gem.metadata:{githup_Repo'Sync: ssh://github.com/iixixi/repository/DOCKER>Gui:type:Containers/Deno.pkg.api/adk.yaml.json.xvlsnx.jpng/souce::"https://Bitcore.org"
gem: thimbal.metadata
source: "https://bitcore.org.pkg.github/code/OWNER"?', "true",
$gem: BITORE
$gem:install bitcore_$gem@versioning:"0.1.1"::Build::Return:'#
<style type="text/css">Package::Package: apt

Version: 1.0.1
Severity: normal
File: /user/bin/bash.get

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

as the subject says:
$ sudo apt-get install ""
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut.
Statusinformationen werden eingelesen.... Fertig
terminate called after throwing an instance of 'std::out_of_range' what(): basic_string::compare: __pos (which is 18446744073709551615) > this->size() (which is 0)

Greetings,
Joachim

    -- Package-specific info:

    -- apt-config dump --

APT "";
APT::Architecture "amd64";
APT::Build-Essential "";
APT::Build-Essential:: "build-essential";
APT::Install-Recommends "1";
APT::Install-Suggests "0";
APT::Authentication "";
APT::Authentication::TrustCDROM "true";
APT::NeverAutoRemove "";
APT::NeverAutoRemove:: "^firmware-linux.";
APT::NeverAutoRemove:: "^linux-firmware$";
APT::NeverAutoRemove:: "^linux-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-amd64$";
APT::NeverAutoRemove:: "^linux-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-headers-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-amd64$";
APT::NeverAutoRemove:: "^.-modules-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-modules-amd64$";
APT::NeverAutoRemove:: "^.-kernel-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-kernel-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-amd64$";
APT::VersionedKernelPackages "";
APT::VersionedKernelPackages:: "linux-image";
APT::VersionedKernelPackages:: "linux-headers";
APT::VersionedKernelPackages:: "linux-image-extra";
APT::VersionedKernelPackages:: "linux-signed-image";
APT::VersionedKernelPackages:: "kfreebsd-image";
APT::VersionedKernelPackages:: "kfreebsd-headers";
APT::VersionedKernelPackages:: "gnumach-image";
APT::VersionedKernelPackages:: ".-modules";
APT::VersionedKernelPackages:: ".-kernel";
APT::VersionedKernelPackages:: "linux-backports-modules-.";
APT::Never-MarkAuto-Sections "";
APT::Never-MarkAuto-Sections:: "metapackages";
APT::Never-MarkAuto-Sections:: "restricted/metapackages";
APT::Never-MarkAuto-Sections:: "universe/metapackages";
APT::Never-MarkAuto-Sections:: "multiverse/metapackages";
APT::Never-MarkAuto-Sections:: "oldlibs";
APT::Never-MarkAuto-Sections:: "restricted/oldlibs";
APT::Never-MarkAuto-Sections:: "universe/oldlibs";
APT::Never-MarkAuto-Sections:: "multiverse/oldlibs";
APT::Architectures "";
APT::Architectures:: "amd64";
APT::Architectures:: "i386";
APT::Compressor "";
APT::Compressor::. "";
APT::Compressor::.::Name ".";
APT::Compressor::.::Extension "";
APT::Compressor::.::Binary "";
APT::Compressor::.::Cost "1";
APT::Compressor::gzip "";
APT::Compressor::gzip::Name "gzip";
APT::Compressor::gzip::Extension ".gz";
APT::Compressor::gzip::Binary "gzip";
APT::Compressor::gzip::Cost "2";
APT::Compressor::gzip::CompressArg "";
APT::Compressor::gzip::CompressArg:: "-9n";
APT::Compressor::gzip::UncompressArg "";
APT::Compressor::gzip::UncompressArg:: "-d";
APT::Compressor::bzip2 "";
APT::Compressor::bzip2::Name "bzip2";
APT::Compressor::bzip2::Extension ".bz2";
APT::Compressor::bzip2::Binary "bzip2";
APT::Compressor::bzip2::Cost "3";
APT::Compressor::bzip2::CompressArg "";
APT::Compressor::bzip2::CompressArg:: "-9";
APT::Compressor::bzip2::UncompressArg "";
APT::Compressor::bzip2::UncompressArg:: "-d";
APT::Compressor::xz "";
APT::Compressor::xz::Name "xz";
APT::Compressor::xz::Extension ".xz";
APT::Compressor::xz::Binary "xz";
APT::Compressor::xz::Cost "4";
APT::Compressor::xz::CompressArg "";
APT::Compressor::xz::CompressArg:: "-6";
APT::Compressor::xz::UncompressArg "";
APT::Compressor::xz::UncompressArg:: "-d";
APT::Compressor::lzma "";
APT::Compressor::lzma::Name "lzma";
APT::Compressor::lzma::Extension ".lzma";
APT::Compressor::lzma::Binary "xz";
APT::Compressor::lzma::Cost "5";
APT::Compressor::lzma::CompressArg "";
APT::Compressor::lzma::CompressArg:: "--format=lzma";
APT::Compressor::lzma::CompressArg:: "-9";
APT::Compressor::lzma::UncompressArg "";
APT::Compressor::lzma::UncompressArg:: "--format=lzma";
APT::Compressor::lzma::UncompressArg:: "-d";
APT::Compressor::::Name "";
APT::Compressor::::Extension ".";
APT::Compressor::::Binary "";
APT::Compressor::::Cost "100";
APT::Compressor::::CompressArg "";
APT::Compressor::::CompressArg:: "-9";
APT::Compressor::::UncompressArg "";
APT::Compressor::::UncompressArg:: "-d";
Dir "/";
Dir::State "var/lib/apt/";
Dir::State::lists "lists/";
Dir::State::cdroms "cdroms.list";
Dir::State::mirrors "mirrors/";
Dir::State::extended_states "extended_states";
Dir::State::status "/var/lib/dpkg/status";
Dir::Cache "var/cache/apt/";
Dir::Cache::archives "archives/";
Dir::Cache::srcpkgcache "srcpkgcache.bin";
Dir::Cache::pkgcache "pkgcache.bin";
Dir::Etc "etc/apt/";
Dir::Etc::sourcelist "sources.list";
Dir::Etc::sourceparts "sources.list.d";
Dir::Etc::vendorlist "vendors.list";
Dir::Etc::vendorparts "vendors.list.d";
Dir::Etc::main "apt.conf";
Dir::Etc::netrc "auth.conf";
Dir::Etc::parts "apt.conf.d";
Dir::Etc::preferences "preferences";
Dir::Etc::preferencesparts "preferences.d";
Dir::Etc::trusted "trusted.gpg";
Dir::Etc::trustedparts "trusted.gpg.d";
Dir::Bin "";
Dir::Bin::methods "/usr/lib/apt/methods";
Dir::Bin::solvers "";
Dir::Bin::solvers:: "/usr/lib/apt/solvers";
Dir::Bin::dpkg "/usr/bin/dpkg";
Dir::Bin::bzip2 "/bin/bzip2";
Dir::Bin::xz "/usr/bin/xz";
Dir::Bin::lzma "/usr/bin/xz";
Dir::Media "";
Dir::Media::MountPath "/media/cdrom";
Dir::Log "var/log/apt";
Dir::Log::Terminal "term.log";
Dir::Log::History "history.log";
Dir::Ignore-Files-Silently "";
Dir::Ignore-Files-Silently:: "~$";
Dir::Ignore-Files-Silently:: ".disabled$";
Dir::Ignore-Files-Silently:: ".bak$";
Dir::Ignore-Files-Silently:: ".dpkg-[a-z]+$";
Dir::Ignore-Files-Silently:: ".save$";
Dir::Ignore-Files-Silently:: ".orig$";
Acquire "";
Acquire::cdrom "";
Acquire::cdrom::mount "/media/cdrom";
Acquire::PDiffs "false";
Acquire::Languages "";
Acquire::Languages:: "en";
Acquire::Languages:: "de";
Acquire::Languages:: "none";
DPkg "";
DPkg::Pre-Invoke "";
DPkg::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
DPkg::Post-Invoke "";
DPkg::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
DPkg::Post-Invoke:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --debconf --user nobody --pending";
DPkg::Post-Invoke:: "[ ! -e /usr/bin/how-can-i-help ] || /usr/bin/how-can-i-help";
DPkg::Pre-Install-Pkgs "";
DPkg::Pre-Install-Pkgs:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --user nobody --apt-preinst";
DPkg::Pre-Install-Pkgs:: "/usr/bin/apt-listchanges --apt || test $? -ne 10";
DPkg::Pre-Install-Pkgs:: "/usr/sbin/dpkg-preconfigure --apt || true";
DPkg::Tools "";
DPkg::Tools::Options "";
DPkg::Tools::Options::adequate "";
DPkg::Tools::Options::adequate::Version "2";
DPkg::Tools::Options::/usr/bin/apt-listchanges "";
DPkg::Tools::Options::/usr/bin/apt-listchanges::Version "2";
RPM "";
RPM::Pre-Invoke "";
RPM::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
RPM::Post-Invoke "";
RPM::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
Adequate "";
Adequate::Enabled "false";
CommandLine "";
CommandLine::AsString "apt-config dump";

    -- (no /etc/apt/preferences present) --

    -- /etc/apt/sources.list --

deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

#deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

deb http://http.debian.net/debian/ sid main non-free contrib
deb-src http://http.debian.net/debian/ sid main non-free contrib

deb http://http.debian.net/debian/ experimental main non-free contrib
deb-src http://http.debian.net/debian/ experimental main non-free contrib

#deb http://security.debian.org/ wheezy/updates main contrib non-free
#deb-src http://security.debian.org/ wheezy/updates main contrib non-free

deb http://deb.haskell.org/stable/ ./

    -- System Information:
    Debian Release: jessie/sid
    APT prefers unstable
    APT policy: (500, 'unstable'), (101, 'experimental')
    Architecture: amd64 (x86_64)
    Foreign Architectures: i386

Kernel: Linux 3.13-1-amd64 (SMP w/4 CPU cores)
Locale: LANG=de_DE.UTF-8, LC_CTYPE=de_DE.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash

Versions of packages apt depends on:
ii debian-archive-keyring 2012.4
ii gnupg 1.4.16-1.1
ii libapt-pkg4.12 1.0.1
ii libc6 2.18-4
ii libgcc1 1:4.9-20140411-2
ii libstdc++6 4.9-20140411-2

apt recommends no packages.

Versions of packages apt suggests:
pn apt-doc
ii aptitude 0.6.10-1
ii dpkg-dev 1.17.6
ii python-apt 0.9.3.5

    -- no debconf information

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNOkJgACgkQ9ijrk0dDIGyM9ACfRi95+2tgZwxhouH8048JEVmH
nGwAn3TIsUXTuPHRiK2ccIg9u3h/FAM4
=J2tK
-----END PGP SIGNATURE-----

Reply sent to Michael Vogt mvo@debian.org:
You have taken responsibility. (Mon, 05 May 2014 15:36:23 GMT) (full text, mbox, link).

Message #10 received at 744940-close@bugs.debian.org (full text, mbox, reply):

From: Michael Vogt mvo@debian.org
To: 744940-close@bugs.debian.org
Subject: Bug#744940: fixed in apt 1.0.3
Date: Mon, 05 May 2014 15:34:33 +0000
Source: apt
Source-Version: 1.0.3

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed. If you
have further comments please address them to 744940@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt mvo@debian.org (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Mon, 05 May 2014 14:03:15 +0200
Source: apt
Binary: apt libapt-pkg4.12 libapt-inst1.5 apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all amd64
Version: 1.0.3
Distribution: unstable
Urgency: medium
Maintainer: APT Development Team deity@lists.debian.org
Changed-By: Michael Vogt mvo@debian.org
Description:
apt - commandline package manager
apt-doc - documentation for APT
apt-transport-https - https download transport for APT
apt-utils - package management related utility programs
libapt-inst1.5 - deb package format runtime library
libapt-pkg-dev - development files for APT's libapt-pkg and libapt-inst
libapt-pkg-doc - documentation for APT development
libapt-pkg4.12 - package management runtime library
Closes: 743595 744940 745866 746434
Changes:
apt (1.0.3) unstable; urgency=medium
.
[ Michael Vogt ]

    reduce delta to ubuntu
    provide support for vendor specific config files
    debian/apt-doc.docs: remove README.MultiArch
    Fix missing ScreenWidth check in apt.cc
    Only do openpty() if both stdin/stdout are terminals (Closes: 746434)
    .
    [ David Kalnischkies ]
    add a README for vendor information
    remove outdated README.MultiArch
    build http request in a stringstream
    enforce LFS for partial files in https range requests
    handle pkgnames shorter than modifiers (Closes: 744940)
    allow vendors to install configuration files
    .
    [ John Ogness ]
    properly undo CD-ROM mount in all error cases
    .
    [ Mahyuddin Ramli ]
    add vendor information for BlankOn (Closes: 743595)
    .
    [ Adam Conrad ]
    fix FileFd::Size bitswap on big-endian architectures (Closes: 745866)
    .
    [ Trần Ngọc Quân ]
    l10n: vi.po: Update one new string
    Checksums-Sha1:
    8d9a064d2d7891b89c5f9cc4d4e2556648f3f42b 1720 apt_1.0.3.dsc
    e5f54ecba688f772cbc59ce8693dffdd77a20793 1764368 apt_1.0.3.tar.xz
    40daacec8379ca2ce8efad05da1fc44edc556fa2 270834 apt-doc_1.0.3_all.deb
    f528ffdc0fa79f7aaadf20ff896683fc269204f6 770610 libapt-pkg-doc_1.0.3_all.deb
    3be929ba6b62730b8c7a3e219627a707daa9479f 747166 libapt-pkg4.12_1.0.3_amd64.deb
    2456e0f6b677309dffa0e4ad79611928e358d213 163960 libapt-inst1.5_1.0.3_amd64.deb
    472bfef9c1024a30a6e99a53a844eb98add5a843 1058132 apt_1.0.3_amd64.deb
    070462b88e0e70c0b2a3e9be5ba92e965a1bbb16 188286 libapt-pkg-dev_1.0.3_amd64.deb
    44c7b110958ab4b3213c4591a80d2292f9f41592 350998 apt-utils_1.0.3_amd64.deb
    4704a14aafbc495e00f6c5b324c523198bfc4ec6 130802 apt-transport-https_1.0.3_amd64.deb
    Checksums-Sha256:
    484e761eb8b6f0756f34955acd96cd42e1a42a91836f7b2353166f1ae09941f2 1720 apt_1.0.3.dsc
    2b27e33d550dae8c850c53d3193c948c0497dc0cb9c2e4ceb5a0a3f170098778 1764368 apt_1.0.3.tar.xz
    a792444ad7606780c4a5acb8a1152f5979793fff85ba645e2d4ae546fa94229d 270834 apt-doc_1.0.3_all.deb
    c47f93c24d5e9dbed1a057b3e19099b3ca78bce1d6f1425fa0c512d651c96827 770610 libapt-pkg-doc_1.0.3_all.deb
    6a5f79c7ae7c9c4cd29b9640c937683046761679d8d84cf1d551ad9c667642ea 747166 libapt-pkg4.12_1.0.3_amd64.deb
    8d2e73058e4286ce2f0564e3eeda82af0062ed0ddf7cf2c8cb8d4810f06d7126 163960 libapt-inst1.5_1.0.3_amd64.deb
    515a904e333214a6dc1da4d1c8bc8a63e4ba6f79dcf359b70de956c11189937c 1058132 apt_1.0.3_amd64.deb
    b024796502c74fc83029c9c088e18fdcbb670227e466b00a98f5523236d60345 188286 libapt-pkg-dev_1.0.3_amd64.deb
    b1778d09d24ff6042fdb8986a55e043f2fee3eee9c37ed1f16498e890dec4c03 350998 apt-utils_1.0.3_amd64.deb
    e44fa62e3a7a99ad9a15ac8fa617177fe709e0fa04aac2a455f17439667d5c93 130802 apt-transport-https_1.0.3_amd64.deb
    Files:
    5cf358038059361d5442fc2e31713056 270834 doc optional apt-doc_1.0.3_all.deb
    cc3d00254cfd0d68c14c147f27cac5c6 770610 doc optional libapt-pkg-doc_1.0.3_all.deb
    4adfe98aec3287efd58c19c1780f7e40 747166 libs important libapt-pkg4.12_1.0.3_amd64.deb
    8c2051342840cd899a6dcfcc6013839d 163960 libs important libapt-inst1.5_1.0.3_amd64.deb
    72325aa37a732e8ea493a8eb6e5a935b 1058132 admin important apt_1.0.3_amd64.deb
    0bcff7a5e67e941360b5b3c08300e9ad 188286 libdevel optional libapt-pkg-dev_1.0.3_amd64.deb
    4c7d779338c22cce5b89c3b5109442fb 350998 admin important apt-utils_1.0.3_amd64.deb
    9cff9b1e1bb05233dc06a9a21f806489 130802 admin optional apt-transport-https_1.0.3_amd64.deb
    4696413f0b9af8d163784ccc63ab6226 1720 admin important apt_1.0.3.dsc
    ef218ee8dacbe73552de1acb6b2002d7 1764368 admin important apt_1.0.3.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNnokIACgkQliSD4VZixzS9twCeNIBZcY+D4e4wCL3B/WWqZyRZ
X+sAmwY0Bbl4gIAyYyyR2xEEPgMJZUdZ
=2Cc+
$ git clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY.git

$ cd YOUR-REPOSITORY
name: Node.js Package

on:
release:
types: [created]

jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v2
- uses: actions/setup-node@v1
with:
node-version: 12
- run: npm ci
- run: npm test

publish-gpr:
needs: build
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v0
- uses: actions/setup-node@v1
with:
node-version: 12
registry-url: https://npm.pkg.github.com/
- run: npm ci
- run: npm publish
env:
NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}
Bug archived. Request was from Debbugs Internal Request owner@bugs.debian.org to internal_control@bugs.debian.org. (Sun, 08 Jun 2014 07:28:49 GMT) (full text, mbox, link).

Send a report that this bug log contains spam.

Debian bug tracking system administrator owner@bugs.debian.org. Last modified: Tue Mar 23 10:52:04 2021; Machine Name: bembo
Debian Bug tracking system

Debbugs is free software and licensed under the terms of the GNU Public License version 2. The current version can be obtained from https://bugs.debian.org/debbugs-source/.

Copyright © 1999 Darren O. Benham, 1997,2003 nCiphapt
Version: 1.0.1
Severity: normal
File: /usr/bin/apt-get

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

as the subject says:
$ sudo apt-get install ""
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut.
Statusinformationen werden eingelesen.... Fertig
terminate called after throwing an instance of 'std::out_of_range' what(): basic_string::compare: __pos (which is 18446744073709551615) > this->size() (which is 0)

Greetings,
Joachim

    -- Package-specific info:

    -- apt-config dump --

APT "";
APT::Architecture "amd64";
APT::Build-Essential "";
APT::Build-Essential:: "build-essential";
APT::Install-Recommends "1";
APT::Install-Suggests "0";
APT::Authentication "";
APT::Authentication::TrustCDROM "true";
APT::NeverAutoRemove "";
APT::NeverAutoRemove:: "^firmware-linux.";
APT::NeverAutoRemove:: "^linux-firmware$";
APT::NeverAutoRemove:: "^linux-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-amd64$";
APT::NeverAutoRemove:: "^linux-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-headers-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-amd64$";
APT::NeverAutoRemove:: "^.-modules-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-modules-amd64$";
APT::NeverAutoRemove:: "^.-kernel-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-kernel-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-amd64$";
APT::VersionedKernelPackages "";
APT::VersionedKernelPackages:: "linux-image";
APT::VersionedKernelPackages:: "linux-headers";
APT::VersionedKernelPackages:: "linux-image-extra";
APT::VersionedKernelPackages:: "linux-signed-image";
APT::VersionedKernelPackages:: "kfreebsd-image";
APT::VersionedKernelPackages:: "kfreebsd-headers";
APT::VersionedKernelPackages:: "gnumach-image";
APT::VersionedKernelPackages:: ".-modules";
APT::VersionedKernelPackages:: ".-kernel";
APT::VersionedKernelPackages:: "linux-backports-modules-.";
APT::Never-MarkAuto-Sections "";
APT::Never-MarkAuto-Sections:: "metapackages";
APT::Never-MarkAuto-Sections:: "restricted/metapackages";
APT::Never-MarkAuto-Sections:: "universe/metapackages";
APT::Never-MarkAuto-Sections:: "multiverse/metapackages";
APT::Never-MarkAuto-Sections:: "oldlibs";
APT::Never-MarkAuto-Sections:: "restricted/oldlibs";
APT::Never-MarkAuto-Sections:: "universe/oldlibs";
APT::Never-MarkAuto-Sections:: "multiverse/oldlibs";
APT::Architectures "";
APT::Architectures:: "amd64";
APT::Architectures:: "i386";
APT::Compressor "";
APT::Compressor::. "";
APT::Compressor::.::Name ".";
APT::Compressor::.::Extension "";
APT::Compressor::.::Binary "";
APT::Compressor::.::Cost "1";
APT::Compressor::gzip "";
APT::Compressor::gzip::Name "gzip";
APT::Compressor::gzip::Extension ".gz";
APT::Compressor::gzip::Binary "gzip";
APT::Compressor::gzip::Cost "2";
APT::Compressor::gzip::CompressArg "";
APT::Compressor::gzip::CompressArg:: "-9n";
APT::Compressor::gzip::UncompressArg "";
APT::Compressor::gzip::UncompressArg:: "-d";
APT::Compressor::bzip2 "";
APT::Compressor::bzip2::Name "bzip2";
APT::Compressor::bzip2::Extension ".bz2";
APT::Compressor::bzip2::Binary "bzip2";
APT::Compressor::bzip2::Cost "3";
APT::Compressor::bzip2::CompressArg "";
APT::Compressor::bzip2::CompressArg:: "-9";
APT::Compressor::bzip2::UncompressArg "";
APT::Compressor::bzip2::UncompressArg:: "-d";
APT::Compressor::xz "";
APT::Compressor::xz::Name "xz";
APT::Compressor::xz::Extension ".xz";
APT::Compressor::xz::Binary "xz";
APT::Compressor::xz::Cost "4";
APT::Compressor::xz::CompressArg "";
APT::Compressor::xz::CompressArg:: "-6";
APT::Compressor::xz::UncompressArg "";
APT::Compressor::xz::UncompressArg:: "-d";
APT::Compressor::lzma "";
APT::Compressor::lzma::Name "lzma";
APT::Compressor::lzma::Extension ".lzma";
APT::Compressor::lzma::Binary "xz";
APT::Compressor::lzma::Cost "5";
APT::Compressor::lzma::CompressArg "";
APT::Compressor::lzma::CompressArg:: "--format=lzma";
APT::Compressor::lzma::CompressArg:: "-9";
APT::Compressor::lzma::UncompressArg "";
APT::Compressor::lzma::UncompressArg:: "--format=lzma";
APT::Compressor::lzma::UncompressArg:: "-d";
APT::Compressor::::Name "";
APT::Compressor::::Extension ".";
APT::Compressor::::Binary "";
APT::Compressor::::Cost "100";
APT::Compressor::::CompressArg "";
APT::Compressor::::CompressArg:: "-9";
APT::Compressor::::UncompressArg "";
APT::Compressor::::UncompressArg:: "-d";
Dir "/";
Dir::State "var/lib/apt/";
Dir::State::lists "lists/";
Dir::State::cdroms "cdroms.list";
Dir::State::mirrors "mirrors/";
Dir::State::extended_states "extended_states";
Dir::State::status "/var/lib/dpkg/status";
Dir::Cache "var/cache/apt/";
Dir::Cache::archives "archives/";
Dir::Cache::srcpkgcache "srcpkgcache.bin";
Dir::Cache::pkgcache "pkgcache.bin";
Dir::Etc "etc/apt/";
Dir::Etc::sourcelist "sources.list";
Dir::Etc::sourceparts "sources.list.d";
Dir::Etc::vendorlist "vendors.list";
Dir::Etc::vendorparts "vendors.list.d";
Dir::Etc::main "apt.conf";
Dir::Etc::netrc "auth.conf";
Dir::Etc::parts "apt.conf.d";
Dir::Etc::preferences "preferences";
Dir::Etc::preferencesparts "preferences.d";
Dir::Etc::trusted "trusted.gpg";
Dir::Etc::trustedparts "trusted.gpg.d";
Dir::Bin "";
Dir::Bin::methods "/usr/lib/apt/methods";
Dir::Bin::solvers "";
Dir::Bin::solvers:: "/usr/lib/apt/solvers";
Dir::Bin::dpkg "/usr/bin/dpkg";
Dir::Bin::bzip2 "/bin/bzip2";
Dir::Bin::xz "/usr/bin/xz";
Dir::Bin::lzma "/usr/bin/xz";
Dir::Media "";
Dir::Media::MountPath "/media/cdrom";
Dir::Log "var/log/apt";
Dir::Log::Terminal "term.log";
Dir::Log::History "history.log";
Dir::Ignore-Files-Silently "";
Dir::Ignore-Files-Silently:: "~$";
Dir::Ignore-Files-Silently:: ".disabled$";
Dir::Ignore-Files-Silently:: ".bak$";
Dir::Ignore-Files-Silently:: ".dpkg-[a-z]+$";
Dir::Ignore-Files-Silently:: ".save$";
Dir::Ignore-Files-Silently:: ".orig$";
Acquire "";
Acquire::cdrom "";
Acquire::cdrom::mount "/media/cdrom";
Acquire::PDiffs "false";
Acquire::Languages "";
Acquire::Languages:: "en";
Acquire::Languages:: "de";
Acquire::Languages:: "none";
DPkg "";
DPkg::Pre-Invoke "";
DPkg::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
DPkg::Post-Invoke "";
DPkg::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
DPkg::Post-Invoke:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --debconf --user nobody --pending";
DPkg::Post-Invoke:: "[ ! -e /usr/bin/how-can-i-help ] || /usr/bin/how-can-i-help";
DPkg::Pre-Install-Pkgs "";
DPkg::Pre-Install-Pkgs:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --user nobody --apt-preinst";
DPkg::Pre-Install-Pkgs:: "/usr/bin/apt-listchanges --apt || test $? -ne 10";
DPkg::Pre-Install-Pkgs:: "/usr/sbin/dpkg-preconfigure --apt || true";
DPkg::Tools "";
DPkg::Tools::Options "";
DPkg::Tools::Options::adequate "";
DPkg::Tools::Options::adequate::Version "2";
DPkg::Tools::Options::/usr/bin/apt-listchanges "";
DPkg::Tools::Options::/usr/bin/apt-listchanges::Version "2";
RPM "";
RPM::Pre-Invoke "";
RPM::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
RPM::Post-Invoke "";
RPM::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
Adequate "";
Adequate::Enabled "false";
CommandLine "";
CommandLine::AsString "apt-config dump";

    -- (no /etc/apt/preferences present) --

    -- /etc/apt/sources.list --

deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

#deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

deb http://http.debian.net/debian/ sid main non-free contrib
deb-src http://http.debian.net/debian/ sid main non-free contrib

deb http://http.debian.net/debian/ experimental main non-free contrib
deb-src http://http.debian.net/debian/ experimental main non-free contrib

#deb http://security.debian.org/ wheezy/updates main contrib non-free
#deb-src http://security.debian.org/ wheezy/updates main contrib non-free

deb http://deb.haskell.org/stable/ ./

    -- System Information:
    Debian Release: jessie/sid
    APT prefers unstable
    APT policy: (500, 'unstable'), (101, 'experimental')
    Architecture: amd64 (x86_64)
    Foreign Architectures: i386

Kernel: Linux 3.13-1-amd64 (SMP w/4 CPU cores)
Locale: LANG=de_DE.UTF-8, LC_CTYPE=de_DE.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash

Versions of packages apt depends on:
ii debian-archive-keyring 2012.4
ii gnupg 1.4.16-1.1
ii libapt-pkg4.12 1.0.1
ii libc6 2.18-4
ii libgcc1 1:4.9-20140411-2
ii libstdc++6 4.9-20140411-2

apt recommends no packages.

Versions of packages apt suggests:
pn apt-doc
ii aptitude 0.6.10-1
ii dpkg-dev 1.17.6
ii python-apt 0.9.3.5

    -- no debconf information

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNOkJgACgkQ9ijrk0dDIGyM9ACfRi95+2tgZwxhouH8048JEVmH
nGwAn3TIsUXTuPHRiK2ccIg9u3h/FAM4
=J2tK
-----END PGP SIGNATURE-----

Reply sent to Michael Vogt mvo@debian.org:
You have taken responsibility. (Mon, 05 May 2014 15:36:23 GMT) (full text, mbox, link).

Message #10 received at 744940-close@bugs.debian.org (full text, mbox, reply):

From: Michael Vogt mvo@debian.org
To: 744940-close@bugs.debian.org
Subject: Bug#744940: fixed in apt 1.0.3
Date: Mon, 05 May 2014 15:34:33 +0000
Source: apt
Source-Version: 1.0.3

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed. If you
have further comments please address them to 744940@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt mvo@debian.org (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Mon, 05 May 2014 14:03:15 +0200
Source: apt
Binary: apt libapt-pkg4.12 libapt-inst1.5 apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all amd64
Version: 1.0.3
Distribution: unstable
Urgency: medium
Maintainer: APT Development Team deity@lists.debian.org
Changed-By: Michael Vogt mvo@debian.org
Description:
apt - commandline package manager
apt-doc - documentation for APT
apt-transport-https - https download transport for APT
apt-utils - package management related utility programs
libapt-inst1.5 - deb package format runtime library
libapt-pkg-dev - development files for APT's libapt-pkg and libapt-inst
libapt-pkg-doc - documentation for APT development
libapt-pkg4.12 - package management runtime library
Closes: 743595 744940 745866 746434
Changes:
apt (1.0.3) unstable; urgency=medium
.
[ Michael Vogt ]

    reduce delta to ubuntu
    provide support for vendor specific config files
    debian/apt-doc.docs: remove README.MultiArch
    Fix missing ScreenWidth check in apt.cc
    Only do openpty() if both stdin/stdout are terminals (Closes: 746434)
    .
    [ David Kalnischkies ]
    add a README for vendor information
    remove outdated README.MultiArch
    build http request in a stringstream
    enforce LFS for partial files in https range requests
    handle pkgnames shorter than modifiers (Closes: 744940)
    allow vendors to install configuration files
    .
    [ John Ogness ]
    properly undo CD-ROM mount in all error cases
    .
    [ Mahyuddin Ramli ]
    add vendor information for BlankOn (Closes: 743595)
    .
    [ Adam Conrad ]
    fix FileFd::Size bitswap on big-endian architectures (Closes: 745866)
    .
    [ Trần Ngọc Quân ]
    l10n: vi.po: Update one new string
    Checksums-Sha1:
    8d9a064d2d7891b89c5f9cc4d4e2556648f3f42b 1720 apt_1.0.3.dsc
    e5f54ecba688f772cbc59ce8693dffdd77a20793 1764368 apt_1.0.3.tar.xz
    40daacec8379ca2ce8efad05da1fc44edc556fa2 270834 apt-doc_1.0.3_all.deb
    f528ffdc0fa79f7aaadf20ff896683fc269204f6 770610 libapt-pkg-doc_1.0.3_all.deb
    3be929ba6b62730b8c7a3e219627a707daa9479f 747166 libapt-pkg4.12_1.0.3_amd64.deb
    2456e0f6b677309dffa0e4ad79611928e358d213 163960 libapt-inst1.5_1.0.3_amd64.deb
    472bfef9c1024a30a6e99a53a844eb98add5a843 1058132 apt_1.0.3_amd64.deb
    070462b88e0e70c0b2a3e9be5ba92e965a1bbb16 188286 libapt-pkg-dev_1.0.3_amd64.deb
    44c7b110958ab4b3213c4591a80d2292f9f41592 350998 apt-utils_1.0.3_amd64.deb
    4704a14aafbc495e00f6c5b324c523198bfc4ec6 130802 apt-transport-https_1.0.3_amd64.deb
    Checksums-Sha256:
    484e761eb8b6f0756f34955acd96cd42e1a42a91836f7b2353166f1ae09941f2 1720 apt_1.0.3.dsc
    2b27e33d550dae8c850c53d3193c948c0497dc0cb9c2e4ceb5a0a3f170098778 1764368 apt_1.0.3.tar.xz
    a792444ad7606780c4a5acb8a1152f5979793fff85ba645e2d4ae546fa94229d 270834 apt-doc_1.0.3_all.deb
    c47f93c24d5e9dbed1a057b3e19099b3ca78bce1d6f1425fa0c512d651c96827 770610 libapt-pkg-doc_1.0.3_all.deb
    6a5f79c7ae7c9c4cd29b9640c937683046761679d8d84cf1d551ad9c667642ea 747166 libapt-pkg4.12_1.0.3_amd64.deb
    8d2e73058e4286ce2f0564e3eeda82af0062ed0ddf7cf2c8cb8d4810f06d7126 163960 libapt-inst1.5_1.0.3_amd64.deb
    515a904e333214a6dc1da4d1c8bc8a63e4ba6f79dcf359b70de956c11189937c 1058132 apt_1.0.3_amd64.deb
    b024796502c74fc83029c9c088e18fdcbb670227e466b00a98f5523236d60345 188286 libapt-pkg-dev_1.0.3_amd64.deb
    b1778d09d24ff6042fdb8986a55e043f2fee3eee9c37ed1f16498e890dec4c03 350998 apt-utils_1.0.3_amd64.deb
    e44fa62e3a7a99ad9a15ac8fa617177fe709e0fa04aac2a455f17439667d5c93 130802 apt-transport-https_1.0.3_amd64.deb
    Files:
    5cf358038059361d5442fc2e31713056 270834 doc optional apt-doc_1.0.3_all.deb
    cc3d00254cfd0d68c14c147f27cac5c6 770610 doc optional libapt-pkg-doc_1.0.3_all.deb
    4adfe98aec3287efd58c19c1780f7e40 747166 libs important libapt-pkg4.12_1.0.3_amd64.deb
    8c2051342840cd899a6dcfcc6013839d 163960 libs important libapt-inst1.5_1.0.3_amd64.deb
    72325aa37a732e8ea493a8eb6e5a935b 1058132 admin important apt_1.0.3_amd64.deb
    0bcff7a5e67e941360b5b3c08300e9ad 188286 libdevel optional libapt-pkg-dev_1.0.3_amd64.deb
    4c7d779338c22cce5b89c3b5109442fb 350998 admin important apt-utils_1.0.3_amd64.deb
    9cff9b1e1bb05233dc06a9a21f806489 130802 admin optional apt-transport-https_1.0.3_amd64.deb
    4696413f0b9af8d163784ccc63ab6226 1720 admin important apt_1.0.3.dsc
    ef218ee8dacbe73552de1acb6b2002d7 1764368 admin important apt_1.0.3.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNnokIACgkQliSD4VZixzS9twCeNIBZcY+D4e4wCL3B/WWqZyRZ
X+sAmwY0Bbl4gIAyYyyR2xEEPgMJZUdZ
=2Cc+
$ git clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY.git

$ cd YOUR-REPOSITORY
name: Node.js Package

on:
release:
types: [created]

jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v2
- uses: actions/setup-node@v1
with:
node-version: 12
- run: npm ci
- run: npm test

publish-gpr:
needs: build
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v2
- uses: actions/setup-node@v1
with:
node-version: 12
registry-url: https://npm.pkg.github.com/
- run: npm ci
- run: npm publish
env:
NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}
Bug archived. Request was from Debbugs Internal Request owner@bugs.debian.org to internal_control@bugs.debian.org. (Sun, 08 Jun 2014 07:28:49 GMT) (full text, mbox, link).

Send a report that this bug log contains spam.

Debian bug tracking system administrator owner@bugs.debian.org. Last modified: Tue Mar 23 10:52:04 2021; Machine Name: bembo
Debian Bug tracking system

Debbugs is free software and licensed under the terms of the GNU Public License version 2. The current version can be obtained from https://bugs.debian.org/debbugs-source/.

Copyright © 1999 Darren O. Benham, 1997,2003 nCiph
Package: apt

Version: 1.0.1
Severity: normal
File: /usr/bin/apt-get

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

as the subject says:
$ sudo apt-get install ""
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut.
Statusinformationen werden eingelesen.... Fertig
terminate called after throwing an instance of 'std::out_of_range' what(): basic_string::compare: __pos (which is 18446744073709551615) > this->size() (which is 0)

Greetings,
Joachim

    -- Package-specific info:

    -- apt-config dump --

APT "";
APT::Architecture "amd64";
APT::Build-Essential "";
APT::Build-Essential:: "build-essential";
APT::Install-Recommends "1";
APT::Install-Suggests "0";
APT::Authentication "";
APT::Authentication::TrustCDROM "true";
APT::NeverAutoRemove "";
APT::NeverAutoRemove:: "^firmware-linux.";
APT::NeverAutoRemove:: "^linux-firmware$";
APT::NeverAutoRemove:: "^linux-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-amd64$";
APT::NeverAutoRemove:: "^linux-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-headers-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-image-extra-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-signed-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-image-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-3.13-1-amd64$";
APT::NeverAutoRemove:: "^kfreebsd-headers-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-3.13-1-amd64$";
APT::NeverAutoRemove:: "^gnumach-image-amd64$";
APT::NeverAutoRemove:: "^.-modules-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-modules-amd64$";
APT::NeverAutoRemove:: "^.-kernel-3.13-1-amd64$";
APT::NeverAutoRemove:: "^.-kernel-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-3.13-1-amd64$";
APT::NeverAutoRemove:: "^linux-backports-modules-.-amd64$";
APT::VersionedKernelPackages "";
APT::VersionedKernelPackages:: "linux-image";
APT::VersionedKernelPackages:: "linux-headers";
APT::VersionedKernelPackages:: "linux-image-extra";
APT::VersionedKernelPackages:: "linux-signed-image";
APT::VersionedKernelPackages:: "kfreebsd-image";
APT::VersionedKernelPackages:: "kfreebsd-headers";
APT::VersionedKernelPackages:: "gnumach-image";
APT::VersionedKernelPackages:: ".-modules";
APT::VersionedKernelPackages:: ".-kernel";
APT::VersionedKernelPackages:: "linux-backports-modules-.";
APT::Never-MarkAuto-Sections "";
APT::Never-MarkAuto-Sections:: "metapackages";
APT::Never-MarkAuto-Sections:: "restricted/metapackages";
APT::Never-MarkAuto-Sections:: "universe/metapackages";
APT::Never-MarkAuto-Sections:: "multiverse/metapackages";
APT::Never-MarkAuto-Sections:: "oldlibs";
APT::Never-MarkAuto-Sections:: "restricted/oldlibs";
APT::Never-MarkAuto-Sections:: "universe/oldlibs";
APT::Never-MarkAuto-Sections:: "multiverse/oldlibs";
APT::Architectures "";
APT::Architectures:: "amd64";
APT::Architectures:: "i386";
APT::Compressor "";
APT::Compressor::. "";
APT::Compressor::.::Name ".";
APT::Compressor::.::Extension "";
APT::Compressor::.::Binary "";
APT::Compressor::.::Cost "1";
APT::Compressor::gzip "";
APT::Compressor::gzip::Name "gzip";
APT::Compressor::gzip::Extension ".gz";
APT::Compressor::gzip::Binary "gzip";
APT::Compressor::gzip::Cost "2";
APT::Compressor::gzip::CompressArg "";
APT::Compressor::gzip::CompressArg:: "-9n";
APT::Compressor::gzip::UncompressArg "";
APT::Compressor::gzip::UncompressArg:: "-d";
APT::Compressor::bzip2 "";
APT::Compressor::bzip2::Name "bzip2";
APT::Compressor::bzip2::Extension ".bz2";
APT::Compressor::bzip2::Binary "bzip2";
APT::Compressor::bzip2::Cost "3";
APT::Compressor::bzip2::CompressArg "";
APT::Compressor::bzip2::CompressArg:: "-9";
APT::Compressor::bzip2::UncompressArg "";
APT::Compressor::bzip2::UncompressArg:: "-d";
APT::Compressor::xz "";
APT::Compressor::xz::Name "xz";
APT::Compressor::xz::Extension ".xz";
APT::Compressor::xz::Binary "xz";
APT::Compressor::xz::Cost "4";
APT::Compressor::xz::CompressArg "";
APT::Compressor::xz::CompressArg:: "-6";
APT::Compressor::xz::UncompressArg "";
APT::Compressor::xz::UncompressArg:: "-d";
APT::Compressor::lzma "";
APT::Compressor::lzma::Name "lzma";
APT::Compressor::lzma::Extension ".lzma";
APT::Compressor::lzma::Binary "xz";
APT::Compressor::lzma::Cost "5";
APT::Compressor::lzma::CompressArg "";
APT::Compressor::lzma::CompressArg:: "--format=lzma";
APT::Compressor::lzma::CompressArg:: "-9";
APT::Compressor::lzma::UncompressArg "";
APT::Compressor::lzma::UncompressArg:: "--format=lzma";
APT::Compressor::lzma::UncompressArg:: "-d";
APT::Compressor::::Name "";
APT::Compressor::::Extension ".";
APT::Compressor::::Binary "";
APT::Compressor::::Cost "100";
APT::Compressor::::CompressArg "";
APT::Compressor::::CompressArg:: "-9";
APT::Compressor::::UncompressArg "";
APT::Compressor::::UncompressArg:: "-d";
Dir "/";
Dir::State "var/lib/apt/";
Dir::State::lists "lists/";
Dir::State::cdroms "cdroms.list";
Dir::State::mirrors "mirrors/";
Dir::State::extended_states "extended_states";
Dir::State::status "/var/lib/dpkg/status";
Dir::Cache "var/cache/apt/";
Dir::Cache::archives "archives/";
Dir::Cache::srcpkgcache "srcpkgcache.bin";
Dir::Cache::pkgcache "pkgcache.bin";
Dir::Etc "etc/apt/";
Dir::Etc::sourcelist "sources.list";
Dir::Etc::sourceparts "sources.list.d";
Dir::Etc::vendorlist "vendors.list";
Dir::Etc::vendorparts "vendors.list.d";
Dir::Etc::main "apt.conf";
Dir::Etc::netrc "auth.conf";
Dir::Etc::parts "apt.conf.d";
Dir::Etc::preferences "preferences";
Dir::Etc::preferencesparts "preferences.d";
Dir::Etc::trusted "trusted.gpg";
Dir::Etc::trustedparts "trusted.gpg.d";
Dir::Bin "";
Dir::Bin::methods "/usr/lib/apt/methods";
Dir::Bin::solvers "";
Dir::Bin::solvers:: "/usr/lib/apt/solvers";
Dir::Bin::dpkg "/usr/bin/dpkg";
Dir::Bin::bzip2 "/bin/bzip2";
Dir::Bin::xz "/usr/bin/xz";
Dir::Bin::lzma "/usr/bin/xz";
Dir::Media "";
Dir::Media::MountPath "/media/cdrom";
Dir::Log "var/log/apt";
Dir::Log::Terminal "term.log";
Dir::Log::History "history.log";
Dir::Ignore-Files-Silently "";
Dir::Ignore-Files-Silently:: "~$";
Dir::Ignore-Files-Silently:: ".disabled$";
Dir::Ignore-Files-Silently:: ".bak$";
Dir::Ignore-Files-Silently:: ".dpkg-[a-z]+$";
Dir::Ignore-Files-Silently:: ".save$";
Dir::Ignore-Files-Silently:: ".orig$";
Acquire "";
Acquire::cdrom "";
Acquire::cdrom::mount "/media/cdrom";
Acquire::PDiffs "false";
Acquire::Languages "";
Acquire::Languages:: "en";
Acquire::Languages:: "de";
Acquire::Languages:: "none";
DPkg "";
DPkg::Pre-Invoke "";
DPkg::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
DPkg::Post-Invoke "";
DPkg::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
DPkg::Post-Invoke:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --debconf --user nobody --pending";
DPkg::Post-Invoke:: "[ ! -e /usr/bin/how-can-i-help ] || /usr/bin/how-can-i-help";
DPkg::Pre-Install-Pkgs "";
DPkg::Pre-Install-Pkgs:: "adequate --help >/dev/null 2>&1 || exit 0; exec adequate --user nobody --apt-preinst";
DPkg::Pre-Install-Pkgs:: "/usr/bin/apt-listchanges --apt || test $? -ne 10";
DPkg::Pre-Install-Pkgs:: "/usr/sbin/dpkg-preconfigure --apt || true";
DPkg::Tools "";
DPkg::Tools::Options "";
DPkg::Tools::Options::adequate "";
DPkg::Tools::Options::adequate::Version "2";
DPkg::Tools::Options::/usr/bin/apt-listchanges "";
DPkg::Tools::Options::/usr/bin/apt-listchanges::Version "2";
RPM "";
RPM::Pre-Invoke "";
RPM::Pre-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper pre-install; fi";
RPM::Post-Invoke "";
RPM::Post-Invoke:: "if [ -x /usr/bin/etckeeper ]; then etckeeper post-install; fi";
Adequate "";
Adequate::Enabled "false";
CommandLine "";
CommandLine::AsString "apt-config dump";

    -- (no /etc/apt/preferences present) --

    -- /etc/apt/sources.list --

deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

#deb cdrom:[Debian GNU/Linux testing Wheezy - Official Snapshot amd64 NETINST Binary-1 20120807-15:25]/ wheezy main

deb http://http.debian.net/debian/ sid main non-free contrib
deb-src http://http.debian.net/debian/ sid main non-free contrib

deb http://http.debian.net/debian/ experimental main non-free contrib
deb-src http://http.debian.net/debian/ experimental main non-free contrib

#deb http://security.debian.org/ wheezy/updates main contrib non-free
#deb-src http://security.debian.org/ wheezy/updates main contrib non-free

deb http://deb.haskell.org/stable/ ./

    -- System Information:
    Debian Release: jessie/sid
    APT prefers unstable
    APT policy: (500, 'unstable'), (101, 'experimental')
    Architecture: amd64 (x86_64)
    Foreign Architectures: i386

Kernel: Linux 3.13-1-amd64 (SMP w/4 CPU cores)
Locale: LANG=de_DE.UTF-8, LC_CTYPE=de_DE.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash

Versions of packages apt depends on:
ii debian-archive-keyring 2012.4
ii gnupg 1.4.16-1.1
ii libapt-pkg4.12 1.0.1
ii libc6 2.18-4
ii libgcc1 1:4.9-20140411-2
ii libstdc++6 4.9-20140411-2

apt recommends no packages.

Versions of packages apt suggests:
pn apt-doc
ii aptitude 0.6.10-1
ii dpkg-dev 1.17.6
ii python-apt 0.9.3.5

    -- no debconf information

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNOkJgACgkQ9ijrk0dDIGyM9ACfRi95+2tgZwxhouH8048JEVmH
nGwAn3TIsUXTuPHRiK2ccIg9u3h/FAM4
=J2tK
-----END PGP SIGNATURE-----

Reply sent to Michael Vogt mvo@debian.org:
You have taken responsibility. (Mon, 05 May 2014 15:36:23 GMT) (full text, mbox, link).

Message #10 received at 744940-close@bugs.debian.org (full text, mbox, reply):

From: Michael Vogt mvo@debian.org
To: 744940-close@bugs.debian.org
Subject: Bug#744940: fixed in apt 1.0.3
Date: Mon, 05 May 2014 15:34:33 +0000
Source: apt
Source-Version: 1.0.3

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed. If you
have further comments please address them to 744940@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt mvo@debian.org (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Mon, 05 May 2014 14:03:15 +0200
Source: apt
Binary: apt libapt-pkg4.12 libapt-inst1.5 apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all amd64
Version: 1.0.3
Distribution: unstable
Urgency: medium
Maintainer: APT Development Team deity@lists.debian.org
Changed-By: Michael Vogt mvo@debian.org
Description:
apt - commandline package manager
apt-doc - documentation for APT
apt-transport-https - https download transport for APT
apt-utils - package management related utility programs
libapt-inst1.5 - deb package format runtime library
libapt-pkg-dev - development files for APT's libapt-pkg and libapt-inst
libapt-pkg-doc - documentation for APT development
libapt-pkg4.12 - package management runtime library
Closes: 743595 744940 745866 746434
Changes:
apt (1.0.3) unstable; urgency=medium
.
[ Michael Vogt ]

    reduce delta to ubuntu
    provide support for vendor specific config files
    debian/apt-doc.docs: remove README.MultiArch
    Fix missing ScreenWidth check in apt.cc
    Only do openpty() if both stdin/stdout are terminals (Closes: 746434)
    .
    [ David Kalnischkies ]
    add a README for vendor information
    remove outdated README.MultiArch
    build http request in a stringstream
    enforce LFS for partial files in https range requests
    handle pkgnames shorter than modifiers (Closes: 744940)
    allow vendors to install configuration files
    .
    [ John Ogness ]
    properly undo CD-ROM mount in all error cases
    .
    [ Mahyuddin Ramli ]
    add vendor information for BlankOn (Closes: 743595)
    .
    [ Adam Conrad ]
    fix FileFd::Size bitswap on big-endian architectures (Closes: 745866)
    .
    [ Trần Ngọc Quân ]
    l10n: vi.po: Update one new string
    Checksums-Sha1:
    8d9a064d2d7891b89c5f9cc4d4e2556648f3f42b 1720 apt_1.0.3.dsc
    e5f54ecba688f772cbc59ce8693dffdd77a20793 1764368 apt_1.0.3.tar.xz
    40daacec8379ca2ce8efad05da1fc44edc556fa2 270834 apt-doc_1.0.3_all.deb
    f528ffdc0fa79f7aaadf20ff896683fc269204f6 770610 libapt-pkg-doc_1.0.3_all.deb
    3be929ba6b62730b8c7a3e219627a707daa9479f 747166 libapt-pkg4.12_1.0.3_amd64.deb
    2456e0f6b677309dffa0e4ad79611928e358d213 163960 libapt-inst1.5_1.0.3_amd64.deb
    472bfef9c1024a30a6e99a53a844eb98add5a843 1058132 apt_1.0.3_amd64.deb
    070462b88e0e70c0b2a3e9be5ba92e965a1bbb16 188286 libapt-pkg-dev_1.0.3_amd64.deb
    44c7b110958ab4b3213c4591a80d2292f9f41592 350998 apt-utils_1.0.3_amd64.deb
    4704a14aafbc495e00f6c5b324c523198bfc4ec6 130802 apt-transport-https_1.0.3_amd64.deb
    Checksums-Sha256:
    484e761eb8b6f0756f34955acd96cd42e1a42a91836f7b2353166f1ae09941f2 1720 apt_1.0.3.dsc
    2b27e33d550dae8c850c53d3193c948c0497dc0cb9c2e4ceb5a0a3f170098778 1764368 apt_1.0.3.tar.xz
    a792444ad7606780c4a5acb8a1152f5979793fff85ba645e2d4ae546fa94229d 270834 apt-doc_1.0.3_all.deb
    c47f93c24d5e9dbed1a057b3e19099b3ca78bce1d6f1425fa0c512d651c96827 770610 libapt-pkg-doc_1.0.3_all.deb
    6a5f79c7ae7c9c4cd29b9640c937683046761679d8d84cf1d551ad9c667642ea 747166 libapt-pkg4.12_1.0.3_amd64.deb
    8d2e73058e4286ce2f0564e3eeda82af0062ed0ddf7cf2c8cb8d4810f06d7126 163960 libapt-inst1.5_1.0.3_amd64.deb
    515a904e333214a6dc1da4d1c8bc8a63e4ba6f79dcf359b70de956c11189937c 1058132 apt_1.0.3_amd64.deb
    b024796502c74fc83029c9c088e18fdcbb670227e466b00a98f5523236d60345 188286 libapt-pkg-dev_1.0.3_amd64.deb
    b1778d09d24ff6042fdb8986a55e043f2fee3eee9c37ed1f16498e890dec4c03 350998 apt-utils_1.0.3_amd64.deb
    e44fa62e3a7a99ad9a15ac8fa617177fe709e0fa04aac2a455f17439667d5c93 130802 apt-transport-https_1.0.3_amd64.deb
    Files:
    5cf358038059361d5442fc2e31713056 270834 doc optional apt-doc_1.0.3_all.deb
    cc3d00254cfd0d68c14c147f27cac5c6 770610 doc optional libapt-pkg-doc_1.0.3_all.deb
    4adfe98aec3287efd58c19c1780f7e40 747166 libs important libapt-pkg4.12_1.0.3_amd64.deb
    8c2051342840cd899a6dcfcc6013839d 163960 libs important libapt-inst1.5_1.0.3_amd64.deb
    72325aa37a732e8ea493a8eb6e5a935b 1058132 admin important apt_1.0.3_amd64.deb
    0bcff7a5e67e941360b5b3c08300e9ad 188286 libdevel optional libapt-pkg-dev_1.0.3_amd64.deb
    4c7d779338c22cce5b89c3b5109442fb 350998 admin important apt-utils_1.0.3_amd64.deb
    9cff9b1e1bb05233dc06a9a21f806489 130802 admin optional apt-transport-https_1.0.3_amd64.deb
    4696413f0b9af8d163784ccc63ab6226 1720 admin important apt_1.0.3.dsc
    ef218ee8dacbe73552de1acb6b2002d7 1764368 admin important apt_1.0.3.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlNnokIACgkQliSD4VZixzS9twCeNIBZcY+D4e4wCL3B/WWqZyRZ
X+sAmwY0Bbl4gIAyYyyR2xEEPgMJZUdZ
=2Cc+
-----END PGP SIGNATURE-----

Bug archived. Request was from Debbugs Internal Request owner@bugs.debian.org to internal_control@bugs.debian.org. (Sun, 08 Jun 2014 07:28:49 GMT) (full text, mbox, link).

Send a report that this bug log contains spam.

Debian bug tracking system administrator owner@bugs.debian.org. Last modified: Tue Mar 23 10:52:04 2021; Machine Name: bembo
Debian Bug tracking system

Debbugs is free software and licensed under the terms of the GNU Public License version 2. The current version can be obtained from https://bugs.debian.org/debbugs-source/.

Copyright © 1999 Darren O. Benham, 1997,2003 nCiph
Echo

#596 https-svn.zachrytylerwood-administrator-.git-paradice.svn" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin git@github.com:zachrytwood/https-svn.zachrytylerwood-administrator-.git-paradice.svn.git
git push -u origin main
git remote add origin git@github.com:zachrytwood/https-svn.zachrytylerwood-administrator-.git-paradice.svn.git
git branch -M main
git.
#Request::PUSH::[mainbranch]
#Request::Pull::[trunk]
h6 {color:black}

BODY {background: #FFFFFF;}

a.skip {font-size: 20%; font-weight: normal; text-decoration: none; color: #ffffff;}

a:link {color: #6666;}

a.nav:link {color: white; text-decoration: none;}

a.nav:visited {color: #cccccc; text-decoration: none;}

a.nav:hover {background: white; text-decoration: none;
color: #6666;}

a.mainLinks {color: #333333; text-decoration: none;}

a.mainLinks:hover {background: #dddddd}

.desc {color: #666666; padding-left: 0.25in; margin-top: 0; font-size: small;}

.pghead {font-size: 160%; font-weight: 600; margin-top: 10px;}

.medhead2 {font-size: 140%; font-weight: 600; margin-bottom: 10px;}

.medhead {font-size: 140%; font-weight: 600; margin-top: 10px;}

.subhd {font-size: 130%; font-style: italic;}

.footer {font-size: 75%;}

img {border-width: 0px;}

------------------->
</style> scripts": { "lint": "build-lint \"src/**/*.js\" \"!src/tests/**/*.js\"", "lint-watch": "build-lint \"src/**/*.js\" \"!src/tesT:: # AUTOMATE:: # FIX:: ALL:: # Const:: MIRROR_DEFAULT=127.0.0.1 fi MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142 scripts": { "lint": "build-lint \"src/**/*.js\" \"!src/tests/**/*.js\"", "lint-watch": "build-lint \"src/**/*.js\" \"!src/tesT:: # AUTOMATE:: # FIX:: ALL:: # Const:: MIRROR_DEFAULT=127.0.0.1 fi MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi
Docker

A software platform used for building applications based on containers — small and lightweight execution environments.
Apache Maven

A default package manager used for the Java programming language and the Java runtime environment.
NuGet

A free and open source package manager used for the Microsoft development platforms including .NET.
RubyGems

A standard format for distributing Ruby programs and libraries used for the Ruby programming language.
npm

A package manager for JavaScript, included with Node.js. npm makes it easy for developers to share and reuse code.
Containers beta

A single place for your team to manage Docker images and decide who can see and access your images.

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"_USER_CREATE = "1" ];
Name::**

-c "sudo useradd -m -s /bin/bash $DISTRO"
VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clea# echo $OUT already exists, please remove it first
**env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
**#**Fix::All::

  if bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
  fi
fi

fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap-fixup is done on first boot

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
github /
pages-gem

196
1.6k

342

Code
Issues 45
Pull requests 15
Actions
Projects
Security

Insights

pages-gem/.github/workflows/push.yml
@parkr
parkr Upgrade to Ruby 2.7
Latest commit 6e2f2ab on Jul 20, 2020
History
1 contributor
18 lines (18 sloc) 360 Bytes
on: push
name: cibuild on push
jobs:
build:
name: "GitHub Pages Tests"
runs-on: ubuntu-latest
strategy:
matrix:
ruby:
- 2.5
- 2.6
- 2.7
steps:
- uses: actions/checkout@master
- name: script/cibuild-docker
run: script/cibuild-docker
env:

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
devrandom /
gitian-builder

36
368

256

Code
Issues 39
Pull requests 5
Actions
Projects
Wiki
Security

Insights

gitian-builder/bin/make-base-vm
@rikublock
rikublock add disk size option
Latest commit 155ffe5 on Aug 17, 2019
History
16 contributors
@josephbisch
@devrandom
@TheBlueMatt
@MarcoFalke
@achow101
@tuaris
@tlrobinson
@rikublock
@laanwj
@ageis
@hyc
@gdm85
executable file 304 lines (262 sloc) 9.28 KB
#!/bin/sh
set -e

DISTRO=ubuntu
SUITE=xenial
ARCH=amd64
DISKSIZE=12287
LXC=0
VBOX=0
DOCKER=0
DOCKER_IMAGE_HASH=""

usage() {
echo "Usage: ${0##*/} [OPTION]..."
echo "Make a base client."
echo
cat << EOF
--help display this help and exit
--distro D build distro D (e.g. debian) instead of ubuntu
--suite U build suite U instead of xenial
--arch A build architecture A (e.g. i386) instead of amd64
--disksize S disk/image size S in MB (default 12287)
--lxc use lxc instead of kvm
--vbox use VirtualBox instead of kvm
--docker use docker instead of kvm
--docker-image-hash D digest of the docker image to build from
The MIRROR_HOST environment variable can be used to change the
apt-cacher host. It should be something that both the host and the
target VM can reach. It may be set to 127.0.0.1, in which case it will be
changed to 10.0.2.2 on the guest (or GITIAN_HOST_IP if it is defined)
10.0.2.2 is the host IP as visible from the guest under qemu networking.
The DEBOOTSTRAP_DIR (but also GITIAN_SUDO_USE_DEBOOTSTRAP_DIR, see below!)
environment variable can be set to select a directory
that will contain data like in "/usr/share/debootstrap/". This allows user to
make a copy of this files to some local dir and modify them locally:
e.g. set env variable "DEBOOTSTRAP_DIR=./mydeboot/", then copy or link
system's version of files there, and modify them there
(e.g. copy your debootstrap-script file "xenial" to "./mydeboot/scripts/").
Set env GITIAN_SUDO_USE_DEBOOTSTRAP_DIR="yes" to allow sudo for debootstrap
to use flags like --preserve-env that are required for DEBOOTSTRAP_DIR to work.
It must be equal string "yes".
This is done as separate variable to make it clear that we modify sudo
behaviour here regarding security (though anyway env is cleared with
whitelist so should be perfectly safe).
The --docker-image-hash option can be used to specify the hash of a particular
base image to use. These hashes can be found under the "RepoDigests" field of
"docker image inspect ". They will be reported in the form "sha256:";
only need the part is needed
EOF
}

if [ $# != 0 ] ; then
while true ; do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"
exit 1
fi

DISTRO_USER_CREATE=0
if [ $DISTRO = "debian" ]; then
# we use a vagrant provider
DISTRO_USER_CREATE=1
fi

vagrant up "$NAME"
if [ $DISTRO_USER_CREATE = "1" ]; then
vagrant ssh "$NAME" -c "sudo useradd -m -s /bin/bash $DISTRO"
fi

vagrant ssh "$NAME" -c "sudo mkdir -p /root/.ssh && sudo chmod 700 /root/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /root/.ssh/authorized_keys'" < var/id_rsa.pub
vagrant ssh "$NAME" -c "sudo -u $DISTRO mkdir -p /home/$DISTRO/.ssh && sudo -u $DISTRO chmod 700 /home/$DISTRO/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /home/$DISTRO/.ssh/authorized_keys'" < var/id_rsa.pub

VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clean"
vagrant suspend "$NAME"

exit 0
fi

if [ $LXC = "1" ]; then
if [ -e $OUT ]; then
echo $OUT already exists, please remove it first
exit 1
fi
sudo rm -rf $OUT-bootstrap
Need universe for lxc in lucid

unset preserve_env
if [ "$GITIAN_SUDO_USE_DEBOOTSTRAP_DIR" = "yes" ]; then
echo npm install eslint --save-dev
yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js

preserve_env=yes # if you would want to set false then unset this variable

fi
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
Fix lxc issue

if [ -f $OUT-bootstrap/usr/lib/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
else
if [ $ARCH = "amd64" ]
then
if [ -f $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
else
if [ -f $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
fi
fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap
npm install eslint --save-dev
or

yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js
#:Build::
#:Const::DOCKER.Gui
type::Container@ZachryTylerWood@Administrator@.git/paradice**
Const::git.github.secrets.((c)(r)).item.id.34173.
Const::Build::@zachrytwoodiii

Build::

{
"name": "docs.github.com",
"private": true,
"main": "server.js",
"author": {
"email": "opensource+docs@github.com",
"name": "GitHub",
"url": "https://github.com/github/docs"
},
"license": "(MIT AND CC-BY-4.0)",
"dependencies": {
"@babel/core": "^7.12.9",
"@babel/plugin-proposal-class-properties": "^7.12.1",
"@babel/plugin-syntax-class-properties": "^7.12.1",
"@babel/plugin-transform-modules-amd": "^7.12.1",
"@babel/plugin-transform-modules-commonjs": "^7.12.1",
"@babel/plugin-transform-react-jsx": "^7.12.7",
"@babel/plugin-transform-runtime": "^7.11.0",
"@babel/preset-env": "^7.12.7",
"@babel/preset-react": "^7.12.7",
"@babel/runtime": "^7.11.2",
"@graphql-inspector/core": "^2.3.0",
"@graphql-tools/load": "^6.2.5",
"@octokit/rest": "^16.38.1",
"@primer/css": "^15.1.0",
"@primer/octicons": "^11.0.0",
"algoliasearch": "^3.35.1",
"babel-loader": "^8.1.0",
"babel-preset-env": "^1.7.0",
"browser-date-formatter": "^3.0.3",
"change-case": "^3.1.0",
"cheerio": "^1.0.0-rc.3",
"compression": "^1.7.4",
"connect-datadog": "0.0.9",
"connect-slashes": "^1.4.0",
"cookie-parser": "^1.4.5",
"copy-webpack-plugin": "^6.0.3",
"cors": "^2.8.5",
"cross-env": "^7.0.2",
"css-loader": "^4.3.0",
"csurf": "^1.11.0",
"directory-tree": "^2.2.5",
"dotenv": "^8.2.0",
"express": "^4.17.1",
"express-rate-limit": "^5.1.3",
"express-timeout-handler": "^2.2.0",
"flat": "^5.0.0",
"github-slugger": "^1.2.1",
"got": "^9.6.0",
"gray-matter": "^4.0.2",
"hast-util-from-parse5": "^6.0.1",
"hast-util-parse-selector": "^2.2.5",
"hast-util-select": "^4.0.2",
"hast-util-to-string": "^1.0.4",
"hastscript": "^6.0.0",
"helmet": "^3.21.2",
"highlightjs-graphql": "^1.0.2",
"hot-shots": "^8.2.0",
"html-entities": "^1.2.1",
"imurmurhash": "^0.1.4",
"ioredis": "^4.19.4",
"ioredis-mock": "^5.2.0",
"is-url": "^1.2.4",
"js-cookie": "^2.2.1",
"js-yaml": "^3.14.0",
"linkinator": "^2.13.1",
"liquidjs": "^9.22.1",
"lodash": "^4.17.20",
"lunr": "^2.3.9",
"lunr-languages": "^1.4.0",
"mdast-util-from-markdown": "^0.8.4",
"mini-css-extract-plugin": "^0.9.0",
"mkdirp": "^1.0.3",
"morgan": "^1.9.1",
"node-fetch": "^2.6.1",
"parse5": "^6.0.1",
"port-used": "^2.0.8",
"rate-limit-redis": "^2.0.0",
"react": "^17.0.1",
"react-dom": "^17.0.1",
"rehype-autolink-headings": "^2.0.5",
"rehype-highlight": "^3.1.0",
"rehype-raw": "^4.0.2",
"rehype-slug": "^2.0.3",
"rehype-stringify": "^6.0.1",
"remark-code-extra": "^1.0.1",
"remark-gemoji-to-emoji": "^1.1.0",
"remark-parse": "^7.0.2",
"remark-rehype": "^5.0.0",
"resolve-url-loader": "^3.1.2",
"revalidator": "^0.3.1",
"rimraf": "^3.0.0",
"sass": "^1.26.3",
"sass-loader": "^9.0.2",
"search-with-your-keyboard": "1.1.0",
"semver": "^5.7.1",
"slash": "^3.0.0",
"strip-html-comments": "^1.0.0",
"style-loader": "^1.2.1",
"unified": "^8.4.2",
"unist-util-visit": "^2.0.3",
"uuid": "^8.3.0",
"walk-sync": "^1.1.4",
"webpack": "^4.44.0",
"webpack-cli": "^3.3.12"
},
"devDependencies": {
"@actions/core": "^1.2.6",
"ajv": "^6.11.0",
"async": "^3.2.0",
"await-sleep": "0.0.1",
"aws-sdk": "^2.610.0",
"babel-eslint": "^10.1.0",
"chalk": "^4.0.0",
"commander": "^6.2.0",
"count-array-values": "^1.2.1",
"csp-parse": "0.0.2",
"csv-parse": "^4.8.8",
"csv-parser": "^2.3.3",
"dedent": "^0.7.0",
"del": "^4.1.1",
"dependency-check": "^4.1.0",
"domwaiter": "^1.1.0",
"eslint": "^7.13.0",
"eslint-config-standard": "^16.0.1",
"eslint-plugin-import": "^2.22.1",
"eslint-plugin-node": "^11.1.0",
"eslint-plugin-promise": "^4.2.1",
"event-to-promise": "^0.8.0",
"friendly-errors-webpack-plugin": "^1.7.0",
"graphql": "^14.5.8",
"heroku-client": "^3.1.0",
"http-status-code": "^2.1.0",
"husky": "^4.2.1",
"image-size": "^0.7.4",
"japanese-characters": "^1.1.0",
"javascript-stringify": "^2.0.1",
"jest": "^26.0.1",
"jest-expect-message": "^1.0.2",
"jest-github-actions-reporter": "^1.0.2",
"jest-puppeteer": "^4.4.0",
"jest-silent-reporter": "^0.2.1",
"jest-slow-test-reporter": "^1.0.0",
"jimp": "^0.16.1",
"make-promises-safe": "^5.1.0",
"mime": "^2.4.4",
"mock-express-response": "^0.2.2",
"mockdate": "^3.0.2",
"nock": "^13.0.4",
"nodemon": "^2.0.4",
"npm-merge-driver-install": "^2.0.0",
"object-hash": "^2.0.1",
"pa11y-ci": "^2.4.0",
"prettier": "^2.1.2",
"puppeteer": "^5.5.0",
"replace": "^1.2.0",
"robots-parser": "^2.1.1",
"start-server-and-test": "^1.12.0",
"supertest": "^4.0.2",
"url-template": "^2.0.8",
"webpack-dev-middleware": "^3.7.2",
"website-scraper": "^4.2.0",
"xlsx-populate": "^1.21.0"
},
"scripts": {
"start": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en,ja' nodemon server.js",
"dev": "npm start",
"debug": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en,ja' nodemon --inspect server.js",
"rest-dev": "script/rest/update-files.js && npm run dev",
"build": "cross-env NODE_ENV=production npx webpack --mode production",
"start-all-languages": "cross-env NODE_ENV=development nodemon server.js",
"lint": "eslint --fix . && prettier -w "/*.{yml,yaml}"",
"lint-translation": "TEST_TRANSLATION=true jest content/lint-files",
"test": "jest && eslint . && prettier -c "/*.{yml,yaml}" && npm run check-deps",
"prebrowser-test": "npm run build",
"browser-test": "start-server-and-test browser-test-server 4001 browser-test-tests",
"browser-test-server": "cross-env NODE_ENV=production PORT=4001 node server.js",
"browser-test-tests": "cross-env BROWSER=1 jest tests/browser/browser.js",
"sync-search": "start-server-and-test sync-search-server 4002 sync-search-indices",
"sync-search-dry-run": "DRY_RUN=1 npm run sync-search",
"sync-search-server": "cross-env NODE_ENV=production PORT=4002 node server.js",
"sync-search-indices": "script/sync-search-indices.js",
"test-watch": "jest --watch --notify --notifyMode=change --coverage",
"check-deps": "node script/check-deps.js",
"prevent-pushes-to-main": "node script/prevent-pushes-to-main.js",
"pa11y-ci": "pa11y-ci",
"pa11y-test": "start-server-and-test browser-test-server 4001 pa11y-ci",
"link-check": "start-server-and-test link-check-server 4002 link-check-test",
"link-check-server": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en' PORT=4002 node server.js",
"link-check-test": "cross-env node script/check-internal-links.js",
"heroku-postbuild": "node script/early-access/clone-for-build.js && npm run build"
},
"engines": {
"node": ">= 14.0.0"
},
"repository": "https://github.com/github/docs",
"husky": {
"hooks": {
"pre-commit": "node script/prevent-translation-commits.js",
"pre-push": "npm run prevent-pushes-to-main"
}
}
}

© 2021 GitHub, Inc.
Terms
Privacy
Security
Status
Docs

Contact GitHub
Pricing
API
Training
Blog
About

an ACR repository to store your container images.
You can use ACR EE instance for more security and better performance.
For instructions see https://www.alibabacloud.com/help/doc-detail/142168.htm
2. Create an ACK cluster to run your containerized application.
You can use ACK Pro cluster for more security and better performance.
For instructions see https://www.alibabacloud.com/help/doc-detail/95108.htm
3. Store your AccessKey pair in GitHub Actions secrets named ACCESS_KEY_ID and ACCESS_KEY_SECRET.
For instructions on setting up secrets see: https://developer.github.com/actions/managing-workflows/storing-secrets/
4. Change the values for the REGION_ID, REGISTRY, NAMESPACE, IMAGE, ACK_CLUSTER_ID, and ACK_DEPLOYMENT_NAME.

name: Build and Deploy to ACK

on:
release:
types: [created]
Environment variables available to all jobs and steps in this workflow.

env:
REGION_ID: cn-hangzhou
REGISTRY: registry.cn-hangzhou.aliyuncs.com
NAMESPACE: namespace
IMAGE: repo
TAG: ${{ github.sha }}
ACK_CLUSTER_ID: clusterID
ACK_DEPLOYMENT_NAME: nginx-deployment

ACR_EE_REGISTRY: myregistry.cn-hangzhou.cr.aliyuncs.com
ACR_EE_INSTANCE_ID: instanceID
ACR_EE_NAMESPACE: namespace
ACR_EE_IMAGE: repo
ACR_EE_TAG: ${{ github.sha }}

jobs:
build:
runs-on: ubuntu-latest
environment: production

steps:
- name: Checkout
  uses: actions/checkout@v2

# 1.1 Login to ACR   
- name: Login to ACR with the AccessKey pair
  uses: aliyun/acr-login@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"

# 1.2 Buid and push image to ACR   
- name: Build and push image to ACR  
  run: |
    docker build --tag "$REGISTRY/$NAMESPACE/$IMAGE:$TAG" .  
    docker push "$REGISTRY/$NAMESPACE/$IMAGE:$TAG"   

# 1.3 Scan image in ACR   
- name: Scan image in ACR
  uses: aliyun/acr-scan@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    repository: "${{ env.NAMESPACE }}/${{ env.IMAGE }}"
    tag: "${{ env.TAG }}"

# 2.1 (Optional) Login to ACR EE          
- uses: actions/checkout@v2
- name: Login to ACR EE with the AccessKey pair
  uses: aliyun/acr-login@v1
  with:
    login-server: "https://${{ env.ACR_EE_REGISTRY }}"
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    instance-id: "${{ env.ACR_EE_INSTANCE_ID }}"

# 2.2 (Optional) Build and push image ACR EE          
- name: Build and push image to ACR EE  
  run: |
    docker build -t "$ACR_EE_REGISTRY/$ACR_EE_NAMESPACE/$ACR_EE_IMAGE:$TAG" .
    docker push "$ACR_EE_REGISTRY/$ACR_EE_NAMESPACE/$ACR_EE_IMAGE:$TAG"
# 2.3 (Optional) Scan image in ACR EE          
- name: Scan image in ACR EE
  uses: aliyun/acr-scan@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    instance-id: "${{ env.ACR_EE_INSTANCE_ID }}"
    repository: "${{ env.ACR_EE_NAMESPACE}}/${{ env.ACR_EE_IMAGE }}"
    tag: "${{ env.ACR_EE_TAG }}"

# 3.1 Set ACK context         
- name: Set K8s context
  uses: aliyun/ack-set-context@v1
  with:
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    cluster-id: "${{ env.ACK_CLUSTER_ID }}"

# 3.2 Deploy the image to the ACK cluster
- name: Set up Kustomize
  run: |-
    curl -s "https://raw.githubusercontent.com/kubernetes-sigs/kustomize/master/hack/install_kustomize.sh"  | bash /dev/stdin 3.8.6
- name: Deploy
  run: |-

Jenkins and GitHub Actions both allow you to create workflows that automatically build, test, publish, release, and deploy code. Jenkins and GitHub Actions share some similarities in workflow configuration:

Jenkins creates workflows using Declarative Pipelines, which are similar to GitHub Actions workflow files.
Jenkins uses stages to run a collection of steps, while GitHub Actions uses jobs to group one or more steps or individual commands.
Jenkins and GitHub Actions support container-based builds. For more information, see "Creating a Docker container action."
Steps or tasks can be reused and shared with the community.

For more information, see "Core concepts for GitHub Actions."
Key differences

Jenkins has two types of syntax for creating pipelines: Declarative Pipeline and Scripted Pipeline. GitHub Actions uses YAML to create workflows and configuration files. For more information, see "Workflow syntax for GitHub Actions."
Jenkins deployments are typically self-hosted, with users maintaining the servers in their own data centers. GitHub Actions offers a hybrid cloud approach by hosting its own runners that you can use to run jobs, while also supporting self-hosted runners. For more information, see About self-hosted runners.

Comparing capabilities
Distributing your builds

Jenkins lets you send builds to a single build agent, or you can distribute them across multiple agents. You can also classify these agents according to various attributes, such as operating system types.

Similarly, GitHub Actions can send jobs to GitHub-hosted or self-hosted runners, and you can use labels to classify runners according to various attributes. The following table compares how the distributed build concept is implemented for both Jenkins and GitHub Actions.
Jenkins GitHub Actions
agents runners
self-hosted runners
Using sections to organize pipelines

Jenkins splits its Declarative Pipelines into multiple sections. Similarly, GitHub Actions organizes its workflows into separate sections. The table below compares Jenkins sections with the GitHub Actions workflow.
Jenkins Directives GitHub Actions
agent jobs.<job_id>.runs-on
jobs.<job_id>.container
post
stages jobs
steps jobs.<job_id>.steps
Using directives

Jenkins uses directives to manage Declarative Pipelines. These directives define the characteristics of your workflow and how it will execute. The table below demonstrates how these directives map to concepts within GitHub Actions.
Jenkins Directives GitHub Actions
environment jobs.<job_id>.env
jobs.<job_id>.steps[*].env
options jobs.<job_id>.strategy
jobs.<job_id>.strategy.fail-fast
jobs.<job_id>.timeout-minutes
parameters inputs
outputs
triggers on
on.<event_name>.types
on.<push|pull_request>.<branches|tags>
on.<push|pull_request>.paths
triggers { upstreamprojects() } jobs.<job_id>.needs
Jenkins cron syntax on.schedule
stage jobs.<job_id>
jobs.<job_id>.name
tools Specifications for GitHub-hosted runners
input inputs
when jobs.<job_id>.if
Using sequential stages
Parallel job processing

Jenkins can run the stages and steps in parallel, while GitHub Actions currently only runs jobs in parallel.
Jenkins Parallel GitHub Actions
parallel jobs.<job_id>.strategy.max-parallel
Build matrix

Both GitHub Actions and Jenkins let you use a build matrix to define various system combinations.
Jenkins GitHub Actions
axis strategy/matrix
context
stages steps-context
excludes
Using steps to execute tasks

Jenkins groups steps together in stages. Each of these steps can be a script, function, or command, among others. Similarly, GitHub Actions uses jobs to execute specific groups of steps.
Jenkins steps GitHub Actions
script jobs.<job_id>.steps
Examples of common tasks
Scheduling a pipeline to run with cron
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent any
triggers {
cron('H/15 * * * 1-5')
}
}

on:
schedule:
- cron: '*/15 * * * 1-5'

Configuring environment variables in a pipeline
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent any
environment {
MAVEN_PATH = '/usr/local/maven'
}
}

jobs:
maven-build:
env:
MAVEN_PATH: '/usr/local/maven'

Building from upstream projects
Jenkins Pipeline GitHub Actions Workflow

pipeline {
triggers {
upstream(
upstreamProjects: 'job1,job2',
threshold: hudson.model.Result.SUCCESS
)
}
}

jobs:
job1:
job2:
needs: job1
job3:
needs: [job1, job2]

Building with multiple operating systems
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent none
stages {
stage('Run Tests') {
matrix {
axes {
axis {
name: 'PLATFORM'
values: 'macos', 'linux'
}
}
agent { label "${PLATFORM}" }
stages {
stage('test') {
tools { nodejs "node-12" }
steps {
dir("scripts/myapp") {
sh(script: "npm install -g bats")
sh(script: "bats tests")
2s
Current runner version: '2.277.1'
Operating System
Virtual Environment
GITHUB_TOKEN Permissions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v2'
2s
Run actions/checkout@v2
Syncing repository: zachrytwood/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str
Getting Git version info
Deleting the contents of '/home/runner/work/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
Checking out the ref
/usr/bin/git log -1 --format='%H'
'033947fe6eb9f8600e4a6248a4bfb564df4dd4bd'
0s
Run echo Hello, world!
Hello, world!
0s
Run echo Add other actions to build,
Add other actions to build,
test, and deploy your project.
0s
Post job cleanup.
/usr/bin/git version
git version 2.30.2
/usr/bin/git config --local --name-only --get-regexp core.sshCommand
/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core.sshCommand' && git config --local --unset-all 'core.sshCommand' || :
/usr/bin/git config --local --name-only --get-regexp http.https://github.com/.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http.https://github.com/.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :
0s
Cleaning up orphan processes
}
}
}
}
}
}
}
}

name: demo-workflow
on:
push:
jobs:
test:
runs-on: ${{ matrix.os }}
strategy:
fail-fast: false
matrix:
os: [macos-latest, ubuntu-latest]
steps:
- uses: actions/checkout@v1
- uses: actions/setup-node@v1
with:
node-version: 12
- run: npm install -g bats
- run: bats tests

gitian-builder/bin/pyper/user/bin/bin/
set -curl
#fetch::-c++
#:runs-on::
fedora@v0.6.1
#:runs-on::=ubuntu-latest
windowsx89LinuxX32
#:Const::
#:=amd64
#:Echo::hello-World!
#:"Results""true" do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"_USER_CREATE = "1" ];
Name::**

-c "sudo useradd -m -s /bin/bash $DISTRO"
VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clea# echo $OUT already exists, please remove it first
**env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
**#**Fix::All::

  if bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
  fi
fi

fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap-fixup is done on first boot

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
github /
pages-gem

196
1.6k

342

Code
Issues 45
Pull requests 15
Actions
Projects
Security

Insights

pages-gem/.github/workflows/push.yml
@parkr
parkr Upgrade to Ruby 2.7
Latest commit 6e2f2ab on Jul 20, 2020
History
1 contributor
18 lines (18 sloc) 360 Bytes
on: push
name: cibuild on push
jobs:
build:
name: "GitHub Pages Tests"
runs-on: ubuntu-latest
strategy:
matrix:
ruby:
- 2.5
- 2.6
- 2.7
steps:
- uses: actions/checkout@master
- name: script/cibuild-docker
run: script/cibuild-docker
env:

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
devrandom /
gitian-builder

36
368

256

Code
Issues 39
Pull requests 5
Actions
Projects
Wiki
Security

Insights

gitian-builder/bin/make-base-vm
@rikublock
rikublock add disk size option
Latest commit 155ffe5 on Aug 17, 2019
History
16 contributors
@josephbisch
@devrandom
@TheBlueMatt
@MarcoFalke
@achow101
@tuaris
@tlrobinson
@rikublock
@laanwj
@ageis
@hyc
@gdm85
executable file 304 lines (262 sloc) 9.28 KB
#!/bin/sh
set -e

DISTRO=ubuntu
SUITE=xenial
ARCH=amd64
DISKSIZE=12287
LXC=0
VBOX=0
DOCKER=0
DOCKER_IMAGE_HASH=""

usage() {
echo "Usage: ${0##*/} [OPTION]..."
echo "Make a base client."
echo
cat << EOF
--help display this help and exit
--distro D build distro D (e.g. debian) instead of ubuntu
--suite U build suite U instead of xenial
--arch A build architecture A (e.g. i386) instead of amd64
--disksize S disk/image size S in MB (default 12287)
--lxc use lxc instead of kvm
--vbox use VirtualBox instead of kvm
--docker use docker instead of kvm
--docker-image-hash D digest of the docker image to build from
The MIRROR_HOST environment variable can be used to change the
apt-cacher host. It should be something that both the host and the
target VM can reach. It may be set to 127.0.0.1, in which case it will be
changed to 10.0.2.2 on the guest (or GITIAN_HOST_IP if it is defined)
10.0.2.2 is the host IP as visible from the guest under qemu networking.
The DEBOOTSTRAP_DIR (but also GITIAN_SUDO_USE_DEBOOTSTRAP_DIR, see below!)
environment variable can be set to select a directory
that will contain data like in "/usr/share/debootstrap/". This allows user to
make a copy of this files to some local dir and modify them locally:
e.g. set env variable "DEBOOTSTRAP_DIR=./mydeboot/", then copy or link
system's version of files there, and modify them there
(e.g. copy your debootstrap-script file "xenial" to "./mydeboot/scripts/").
Set env GITIAN_SUDO_USE_DEBOOTSTRAP_DIR="yes" to allow sudo for debootstrap
to use flags like --preserve-env that are required for DEBOOTSTRAP_DIR to work.
It must be equal string "yes".
This is done as separate variable to make it clear that we modify sudo
behaviour here regarding security (though anyway env is cleared with
whitelist so should be perfectly safe).
The --docker-image-hash option can be used to specify the hash of a particular
base image to use. These hashes can be found under the "RepoDigests" field of
"docker image inspect ". They will be reported in the form "sha256:";
only need the part is needed
EOF
}

if [ $# != 0 ] ; then
while true ; do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"
exit 1
fi

DISTRO_USER_CREATE=0
if [ $DISTRO = "debian" ]; then
# we use a vagrant provider
DISTRO_USER_CREATE=1
fi

vagrant up "$NAME"
if [ $DISTRO_USER_CREATE = "1" ]; then
vagrant ssh "$NAME" -c "sudo useradd -m -s /bin/bash $DISTRO"
fi

vagrant ssh "$NAME" -c "sudo mkdir -p /root/.ssh && sudo chmod 700 /root/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /root/.ssh/authorized_keys'" < var/id_rsa.pub
vagrant ssh "$NAME" -c "sudo -u $DISTRO mkdir -p /home/$DISTRO/.ssh && sudo -u $DISTRO chmod 700 /home/$DISTRO/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /home/$DISTRO/.ssh/authorized_keys'" < var/id_rsa.pub

VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clean"
vagrant suspend "$NAME"

exit 0
fi

if [ $LXC = "1" ]; then
if [ -e $OUT ]; then
echo $OUT already exists, please remove it first
exit 1
fi
sudo rm -rf $OUT-bootstrap
Need universe for lxc in lucid

unset preserve_env
if [ "$GITIAN_SUDO_USE_DEBOOTSTRAP_DIR" = "yes" ]; then
echo npm install eslint --save-dev
yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js

preserve_env=yes # if you would want to set false then unset this variable

fi
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
Fix lxc issue

if [ -f $OUT-bootstrap/usr/lib/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
else
if [ $ARCH = "amd64" ]
then
if [ -f $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
else
if [ -f $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
fi
fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap
npm install eslint --save-dev
or

yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js
#:Build::
#:Const::DOCKER.Gui
type::Container@ZachryTylerWood@Administrator@.git/paradice**
Const::git.github.secrets.((c)(r)).item.id.34173.
Const::Build::@zachrytwoodiii

Build::

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi
Docker

A software platform used for building applications based on containers — small and lightweight execution environments.
Apache Maven

A default package manager used for the Java programming language and the Java runtime environment.
NuGet

A free and open source package manager used for the Microsoft development platforms including .NET.
RubyGems

A standard format for distributing Ruby programs and libraries used for the Ruby programming language.
npm

A package manager for JavaScript, included with Node.js. npm makes it easy for developers to share and reuse code.
Containers beta

A single place for your team to manage Docker images and decide who can see and access your images.

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"_USER_CREATE = "1" ];
Name::**

-c "sudo useradd -m -s /bin/bash $DISTRO"
VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clea# echo $OUT already exists, please remove it first
**env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
**#**Fix::All::

  if bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
  fi
fi

fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap-fixup is done on first boot

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
github /
pages-gem

196
1.6k

342

Code
Issues 45
Pull requests 15
Actions
Projects
Security

Insights

pages-gem/.github/workflows/push.yml
@parkr
parkr Upgrade to Ruby 2.7
Latest commit 6e2f2ab on Jul 20, 2020
History
1 contributor
18 lines (18 sloc) 360 Bytes
on: push
name: cibuild on push
jobs:
build:
name: "GitHub Pages Tests"
runs-on: ubuntu-latest
strategy:
matrix:
ruby:
- 2.5
- 2.6
- 2.7
steps:
- uses: actions/checkout@master
- name: script/cibuild-docker
run: script/cibuild-docker
env:

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
devrandom /
gitian-builder

36
368

256

Code
Issues 39
Pull requests 5
Actions
Projects
Wiki
Security

Insights

gitian-builder/bin/make-base-vm
@rikublock
rikublock add disk size option
Latest commit 155ffe5 on Aug 17, 2019
History
16 contributors
@josephbisch
@devrandom
@TheBlueMatt
@MarcoFalke
@achow101
@tuaris
@tlrobinson
@rikublock
@laanwj
@ageis
@hyc
@gdm85
executable file 304 lines (262 sloc) 9.28 KB
#!/bin/sh
set -e

DISTRO=ubuntu
SUITE=xenial
ARCH=amd64
DISKSIZE=12287
LXC=0
VBOX=0
DOCKER=0
DOCKER_IMAGE_HASH=""

usage() {
echo "Usage: ${0##*/} [OPTION]..."
echo "Make a base client."
echo
cat << EOF
--help display this help and exit
--distro D build distro D (e.g. debian) instead of ubuntu
--suite U build suite U instead of xenial
--arch A build architecture A (e.g. i386) instead of amd64
--disksize S disk/image size S in MB (default 12287)
--lxc use lxc instead of kvm
--vbox use VirtualBox instead of kvm
--docker use docker instead of kvm
--docker-image-hash D digest of the docker image to build from
The MIRROR_HOST environment variable can be used to change the
apt-cacher host. It should be something that both the host and the
target VM can reach. It may be set to 127.0.0.1, in which case it will be
changed to 10.0.2.2 on the guest (or GITIAN_HOST_IP if it is defined)
10.0.2.2 is the host IP as visible from the guest under qemu networking.
The DEBOOTSTRAP_DIR (but also GITIAN_SUDO_USE_DEBOOTSTRAP_DIR, see below!)
environment variable can be set to select a directory
that will contain data like in "/usr/share/debootstrap/". This allows user to
make a copy of this files to some local dir and modify them locally:
e.g. set env variable "DEBOOTSTRAP_DIR=./mydeboot/", then copy or link
system's version of files there, and modify them there
(e.g. copy your debootstrap-script file "xenial" to "./mydeboot/scripts/").
Set env GITIAN_SUDO_USE_DEBOOTSTRAP_DIR="yes" to allow sudo for debootstrap
to use flags like --preserve-env that are required for DEBOOTSTRAP_DIR to work.
It must be equal string "yes".
This is done as separate variable to make it clear that we modify sudo
behaviour here regarding security (though anyway env is cleared with
whitelist so should be perfectly safe).
The --docker-image-hash option can be used to specify the hash of a particular
base image to use. These hashes can be found under the "RepoDigests" field of
"docker image inspect ". They will be reported in the form "sha256:";
only need the part is needed
EOF
}

if [ $# != 0 ] ; then
while true ; do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"
exit 1
fi

DISTRO_USER_CREATE=0
if [ $DISTRO = "debian" ]; then
# we use a vagrant provider
DISTRO_USER_CREATE=1
fi

vagrant up "$NAME"
if [ $DISTRO_USER_CREATE = "1" ]; then
vagrant ssh "$NAME" -c "sudo useradd -m -s /bin/bash $DISTRO"
fi

vagrant ssh "$NAME" -c "sudo mkdir -p /root/.ssh && sudo chmod 700 /root/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /root/.ssh/authorized_keys'" < var/id_rsa.pub
vagrant ssh "$NAME" -c "sudo -u $DISTRO mkdir -p /home/$DISTRO/.ssh && sudo -u $DISTRO chmod 700 /home/$DISTRO/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /home/$DISTRO/.ssh/authorized_keys'" < var/id_rsa.pub

VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clean"
vagrant suspend "$NAME"

exit 0
fi

if [ $LXC = "1" ]; then
if [ -e $OUT ]; then
echo $OUT already exists, please remove it first
exit 1
fi
sudo rm -rf $OUT-bootstrap
Need universe for lxc in lucid

unset preserve_env
if [ "$GITIAN_SUDO_USE_DEBOOTSTRAP_DIR" = "yes" ]; then
echo npm install eslint --save-dev
yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js

preserve_env=yes # if you would want to set false then unset this variable

fi
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
Fix lxc issue

if [ -f $OUT-bootstrap/usr/lib/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
else
if [ $ARCH = "amd64" ]
then
if [ -f $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
else
if [ -f $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
fi
fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap
npm install eslint --save-dev
or

yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js
#:Build::
#:Const::DOCKER.Gui
type::Container@ZachryTylerWood@Administrator@.git/paradice**
Const::git.github.secrets.((c)(r)).item.id.34173.
Const::Build::@zachrytwoodiii

Build::

{
"name": "docs.github.com",
"private": true,
"main": "server.js",
"author": {
"email": "opensource+docs@github.com",
"name": "GitHub",
"url": "https://github.com/github/docs"
},
"license": "(MIT AND CC-BY-4.0)",
"dependencies": {
"@babel/core": "^7.12.9",
"@babel/plugin-proposal-class-properties": "^7.12.1",
"@babel/plugin-syntax-class-properties": "^7.12.1",
"@babel/plugin-transform-modules-amd": "^7.12.1",
"@babel/plugin-transform-modules-commonjs": "^7.12.1",
"@babel/plugin-transform-react-jsx": "^7.12.7",
"@babel/plugin-transform-runtime": "^7.11.0",
"@babel/preset-env": "^7.12.7",
"@babel/preset-react": "^7.12.7",
"@babel/runtime": "^7.11.2",
"@graphql-inspector/core": "^2.3.0",
"@graphql-tools/load": "^6.2.5",
"@octokit/rest": "^16.38.1",
"@primer/css": "^15.1.0",
"@primer/octicons": "^11.0.0",
"algoliasearch": "^3.35.1",
"babel-loader": "^8.1.0",
"babel-preset-env": "^1.7.0",
"browser-date-formatter": "^3.0.3",
"change-case": "^3.1.0",
"cheerio": "^1.0.0-rc.3",
"compression": "^1.7.4",
"connect-datadog": "0.0.9",
"connect-slashes": "^1.4.0",
"cookie-parser": "^1.4.5",
"copy-webpack-plugin": "^6.0.3",
"cors": "^2.8.5",
"cross-env": "^7.0.2",
"css-loader": "^4.3.0",
"csurf": "^1.11.0",
"directory-tree": "^2.2.5",
"dotenv": "^8.2.0",
"express": "^4.17.1",
"express-rate-limit": "^5.1.3",
"express-timeout-handler": "^2.2.0",
"flat": "^5.0.0",
"github-slugger": "^1.2.1",
"got": "^9.6.0",
"gray-matter": "^4.0.2",
"hast-util-from-parse5": "^6.0.1",
"hast-util-parse-selector": "^2.2.5",
"hast-util-select": "^4.0.2",
"hast-util-to-string": "^1.0.4",
"hastscript": "^6.0.0",
"helmet": "^3.21.2",
"highlightjs-graphql": "^1.0.2",
"hot-shots": "^8.2.0",
"html-entities": "^1.2.1",
"imurmurhash": "^0.1.4",
"ioredis": "^4.19.4",
"ioredis-mock": "^5.2.0",
"is-url": "^1.2.4",
"js-cookie": "^2.2.1",
"js-yaml": "^3.14.0",
"linkinator": "^2.13.1",
"liquidjs": "^9.22.1",
"lodash": "^4.17.20",
"lunr": "^2.3.9",
"lunr-languages": "^1.4.0",
"mdast-util-from-markdown": "^0.8.4",
"mini-css-extract-plugin": "^0.9.0",
"mkdirp": "^1.0.3",
"morgan": "^1.9.1",
"node-fetch": "^2.6.1",
"parse5": "^6.0.1",
"port-used": "^2.0.8",
"rate-limit-redis": "^2.0.0",
"react": "^17.0.1",
"react-dom": "^17.0.1",
"rehype-autolink-headings": "^2.0.5",
"rehype-highlight": "^3.1.0",
"rehype-raw": "^4.0.2",
"rehype-slug": "^2.0.3",
"rehype-stringify": "^6.0.1",
"remark-code-extra": "^1.0.1",
"remark-gemoji-to-emoji": "^1.1.0",
"remark-parse": "^7.0.2",
"remark-rehype": "^5.0.0",
"resolve-url-loader": "^3.1.2",
"revalidator": "^0.3.1",
"rimraf": "^3.0.0",
"sass": "^1.26.3",
"sass-loader": "^9.0.2",
"search-with-your-keyboard": "1.1.0",
"semver": "^5.7.1",
"slash": "^3.0.0",
"strip-html-comments": "^1.0.0",
"style-loader": "^1.2.1",
"unified": "^8.4.2",
"unist-util-visit": "^2.0.3",
"uuid": "^8.3.0",
"walk-sync": "^1.1.4",
"webpack": "^4.44.0",
"webpack-cli": "^3.3.12"
},
"devDependencies": {
"@actions/core": "^1.2.6",
"ajv": "^6.11.0",
"async": "^3.2.0",
"await-sleep": "0.0.1",
"aws-sdk": "^2.610.0",
"babel-eslint": "^10.1.0",
"chalk": "^4.0.0",
"commander": "^6.2.0",
"count-array-values": "^1.2.1",
"csp-parse": "0.0.2",
"csv-parse": "^4.8.8",
"csv-parser": "^2.3.3",
"dedent": "^0.7.0",
"del": "^4.1.1",
"dependency-check": "^4.1.0",
"domwaiter": "^1.1.0",
"eslint": "^7.13.0",
"eslint-config-standard": "^16.0.1",
"eslint-plugin-import": "^2.22.1",
"eslint-plugin-node": "^11.1.0",
"eslint-plugin-promise": "^4.2.1",
"event-to-promise": "^0.8.0",
"friendly-errors-webpack-plugin": "^1.7.0",
"graphql": "^14.5.8",
"heroku-client": "^3.1.0",
"http-status-code": "^2.1.0",
"husky": "^4.2.1",
"image-size": "^0.7.4",
"japanese-characters": "^1.1.0",
"javascript-stringify": "^2.0.1",
"jest": "^26.0.1",
"jest-expect-message": "^1.0.2",
"jest-github-actions-reporter": "^1.0.2",
"jest-puppeteer": "^4.4.0",
"jest-silent-reporter": "^0.2.1",
"jest-slow-test-reporter": "^1.0.0",
"jimp": "^0.16.1",
"make-promises-safe": "^5.1.0",
"mime": "^2.4.4",
"mock-express-response": "^0.2.2",
"mockdate": "^3.0.2",
"nock": "^13.0.4",
"nodemon": "^2.0.4",
"npm-merge-driver-install": "^2.0.0",
"object-hash": "^2.0.1",
"pa11y-ci": "^2.4.0",
"prettier": "^2.1.2",
"puppeteer": "^5.5.0",
"replace": "^1.2.0",
"robots-parser": "^2.1.1",
"start-server-and-test": "^1.12.0",
"supertest": "^4.0.2",
"url-template": "^2.0.8",
"webpack-dev-middleware": "^3.7.2",
"website-scraper": "^4.2.0",
"xlsx-populate": "^1.21.0"
},
"scripts": {
"start": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en,ja' nodemon server.js",
"dev": "npm start",
"debug": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en,ja' nodemon --inspect server.js",
"rest-dev": "script/rest/update-files.js && npm run dev",
"build": "cross-env NODE_ENV=production npx webpack --mode production",
"start-all-languages": "cross-env NODE_ENV=development nodemon server.js",
"lint": "eslint --fix . && prettier -w "/*.{yml,yaml}"",
"lint-translation": "TEST_TRANSLATION=true jest content/lint-files",
"test": "jest && eslint . && prettier -c "/*.{yml,yaml}" && npm run check-deps",
"prebrowser-test": "npm run build",
"browser-test": "start-server-and-test browser-test-server 4001 browser-test-tests",
"browser-test-server": "cross-env NODE_ENV=production PORT=4001 node server.js",
"browser-test-tests": "cross-env BROWSER=1 jest tests/browser/browser.js",
"sync-search": "start-server-and-test sync-search-server 4002 sync-search-indices",
"sync-search-dry-run": "DRY_RUN=1 npm run sync-search",
"sync-search-server": "cross-env NODE_ENV=production PORT=4002 node server.js",
"sync-search-indices": "script/sync-search-indices.js",
"test-watch": "jest --watch --notify --notifyMode=change --coverage",
"check-deps": "node script/check-deps.js",
"prevent-pushes-to-main": "node script/prevent-pushes-to-main.js",
"pa11y-ci": "pa11y-ci",
"pa11y-test": "start-server-and-test browser-test-server 4001 pa11y-ci",
"link-check": "start-server-and-test link-check-server 4002 link-check-test",
"link-check-server": "cross-env NODE_ENV=development ENABLED_LANGUAGES='en' PORT=4002 node server.js",
"link-check-test": "cross-env node script/check-internal-links.js",
"heroku-postbuild": "node script/early-access/clone-for-build.js && npm run build"
},
"engines": {
"node": ">= 14.0.0"
},
"repository": "https://github.com/github/docs",
"husky": {
"hooks": {
"pre-commit": "node script/prevent-translation-commits.js",
"pre-push": "npm run prevent-pushes-to-main"
}
}
}

© 2021 GitHub, Inc.
Terms
Privacy
Security
Status
Docs

Contact GitHub
Pricing
API
Training
Blog
About

an ACR repository to store your container images.
You can use ACR EE instance for more security and better performance.
For instructions see https://www.alibabacloud.com/help/doc-detail/142168.htm
2. Create an ACK cluster to run your containerized application.
You can use ACK Pro cluster for more security and better performance.
For instructions see https://www.alibabacloud.com/help/doc-detail/95108.htm
3. Store your AccessKey pair in GitHub Actions secrets named ACCESS_KEY_ID and ACCESS_KEY_SECRET.
For instructions on setting up secrets see: https://developer.github.com/actions/managing-workflows/storing-secrets/
4. Change the values for the REGION_ID, REGISTRY, NAMESPACE, IMAGE, ACK_CLUSTER_ID, and ACK_DEPLOYMENT_NAME.

name: Build and Deploy to ACK

on:
release:
types: [created]
Environment variables available to all jobs and steps in this workflow.

env:
REGION_ID: cn-hangzhou
REGISTRY: registry.cn-hangzhou.aliyuncs.com
NAMESPACE: namespace
IMAGE: repo
TAG: ${{ github.sha }}
ACK_CLUSTER_ID: clusterID
ACK_DEPLOYMENT_NAME: nginx-deployment

ACR_EE_REGISTRY: myregistry.cn-hangzhou.cr.aliyuncs.com
ACR_EE_INSTANCE_ID: instanceID
ACR_EE_NAMESPACE: namespace
ACR_EE_IMAGE: repo
ACR_EE_TAG: ${{ github.sha }}

jobs:
build:
runs-on: ubuntu-latest
environment: production

steps:
- name: Checkout
  uses: actions/checkout@v2

# 1.1 Login to ACR   
- name: Login to ACR with the AccessKey pair
  uses: aliyun/acr-login@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"

# 1.2 Buid and push image to ACR   
- name: Build and push image to ACR  
  run: |
    docker build --tag "$REGISTRY/$NAMESPACE/$IMAGE:$TAG" .  
    docker push "$REGISTRY/$NAMESPACE/$IMAGE:$TAG"   

# 1.3 Scan image in ACR   
- name: Scan image in ACR
  uses: aliyun/acr-scan@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    repository: "${{ env.NAMESPACE }}/${{ env.IMAGE }}"
    tag: "${{ env.TAG }}"

# 2.1 (Optional) Login to ACR EE          
- uses: actions/checkout@v2
- name: Login to ACR EE with the AccessKey pair
  uses: aliyun/acr-login@v1
  with:
    login-server: "https://${{ env.ACR_EE_REGISTRY }}"
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    instance-id: "${{ env.ACR_EE_INSTANCE_ID }}"

# 2.2 (Optional) Build and push image ACR EE          
- name: Build and push image to ACR EE  
  run: |
    docker build -t "$ACR_EE_REGISTRY/$ACR_EE_NAMESPACE/$ACR_EE_IMAGE:$TAG" .
    docker push "$ACR_EE_REGISTRY/$ACR_EE_NAMESPACE/$ACR_EE_IMAGE:$TAG"
# 2.3 (Optional) Scan image in ACR EE          
- name: Scan image in ACR EE
  uses: aliyun/acr-scan@v1
  with:
    region-id: "${{ env.REGION_ID }}"
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    instance-id: "${{ env.ACR_EE_INSTANCE_ID }}"
    repository: "${{ env.ACR_EE_NAMESPACE}}/${{ env.ACR_EE_IMAGE }}"
    tag: "${{ env.ACR_EE_TAG }}"

# 3.1 Set ACK context         
- name: Set K8s context
  uses: aliyun/ack-set-context@v1
  with:
    access-key-id: "${{ secrets.ACCESS_KEY_ID }}"
    access-key-secret: "${{ secrets.ACCESS_KEY_SECRET }}"
    cluster-id: "${{ env.ACK_CLUSTER_ID }}"

# 3.2 Deploy the image to the ACK cluster
- name: Set up Kustomize
  run: |-
    curl -s "https://raw.githubusercontent.com/kubernetes-sigs/kustomize/master/hack/install_kustomize.sh"  | bash /dev/stdin 3.8.6
- name: Deploy
  run: |-

Jenkins and GitHub Actions both allow you to create workflows that automatically build, test, publish, release, and deploy code. Jenkins and GitHub Actions share some similarities in workflow configuration:

Jenkins creates workflows using Declarative Pipelines, which are similar to GitHub Actions workflow files.
Jenkins uses stages to run a collection of steps, while GitHub Actions uses jobs to group one or more steps or individual commands.
Jenkins and GitHub Actions support container-based builds. For more information, see "Creating a Docker container action."
Steps or tasks can be reused and shared with the community.

For more information, see "Core concepts for GitHub Actions."
Key differences

Jenkins has two types of syntax for creating pipelines: Declarative Pipeline and Scripted Pipeline. GitHub Actions uses YAML to create workflows and configuration files. For more information, see "Workflow syntax for GitHub Actions."
Jenkins deployments are typically self-hosted, with users maintaining the servers in their own data centers. GitHub Actions offers a hybrid cloud approach by hosting its own runners that you can use to run jobs, while also supporting self-hosted runners. For more information, see About self-hosted runners.

Comparing capabilities
Distributing your builds

Jenkins lets you send builds to a single build agent, or you can distribute them across multiple agents. You can also classify these agents according to various attributes, such as operating system types.

Similarly, GitHub Actions can send jobs to GitHub-hosted or self-hosted runners, and you can use labels to classify runners according to various attributes. The following table compares how the distributed build concept is implemented for both Jenkins and GitHub Actions.
Jenkins GitHub Actions
agents runners
self-hosted runners
Using sections to organize pipelines

Jenkins splits its Declarative Pipelines into multiple sections. Similarly, GitHub Actions organizes its workflows into separate sections. The table below compares Jenkins sections with the GitHub Actions workflow.
Jenkins Directives GitHub Actions
agent jobs.<job_id>.runs-on
jobs.<job_id>.container
post
stages jobs
steps jobs.<job_id>.steps
Using directives

Jenkins uses directives to manage Declarative Pipelines. These directives define the characteristics of your workflow and how it will execute. The table below demonstrates how these directives map to concepts within GitHub Actions.
Jenkins Directives GitHub Actions
environment jobs.<job_id>.env
jobs.<job_id>.steps[*].env
options jobs.<job_id>.strategy
jobs.<job_id>.strategy.fail-fast
jobs.<job_id>.timeout-minutes
parameters inputs
outputs
triggers on
on.<event_name>.types
on.<push|pull_request>.<branches|tags>
on.<push|pull_request>.paths
triggers { upstreamprojects() } jobs.<job_id>.needs
Jenkins cron syntax on.schedule
stage jobs.<job_id>
jobs.<job_id>.name
tools Specifications for GitHub-hosted runners
input inputs
when jobs.<job_id>.if
Using sequential stages
Parallel job processing

Jenkins can run the stages and steps in parallel, while GitHub Actions currently only runs jobs in parallel.
Jenkins Parallel GitHub Actions
parallel jobs.<job_id>.strategy.max-parallel
Build matrix

Both GitHub Actions and Jenkins let you use a build matrix to define various system combinations.
Jenkins GitHub Actions
axis strategy/matrix
context
stages steps-context
excludes
Using steps to execute tasks

Jenkins groups steps together in stages. Each of these steps can be a script, function, or command, among others. Similarly, GitHub Actions uses jobs to execute specific groups of steps.
Jenkins steps GitHub Actions
script jobs.<job_id>.steps
Examples of common tasks
Scheduling a pipeline to run with cron
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent any
triggers {
cron('H/15 * * * 1-5')
}
}

on:
schedule:
- cron: '*/15 * * * 1-5'

Configuring environment variables in a pipeline
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent any
environment {
MAVEN_PATH = '/usr/local/maven'
}
}

jobs:
maven-build:
env:
MAVEN_PATH: '/usr/local/maven'

Building from upstream projects
Jenkins Pipeline GitHub Actions Workflow

pipeline {
triggers {
upstream(
upstreamProjects: 'job1,job2',
threshold: hudson.model.Result.SUCCESS
)
}
}

jobs:
job1:
job2:
needs: job1
job3:
needs: [job1, job2]

Building with multiple operating systems
Jenkins Pipeline GitHub Actions Workflow

pipeline {
agent none
stages {
stage('Run Tests') {
matrix {
axes {
axis {
name: 'PLATFORM'
values: 'macos', 'linux'
}
}
agent { label "${PLATFORM}" }
stages {
stage('test') {
tools { nodejs "node-12" }
steps {
dir("scripts/myapp") {
sh(script: "npm install -g bats")
sh(script: "bats tests")
2s
Current runner version: '2.277.1'
Operating System
Virtual Environment
GITHUB_TOKEN Permissions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v2'
2s
Run actions/checkout@v2
Syncing repository: zachrytwood/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str
Getting Git version info
Deleting the contents of '/home/runner/work/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str/-Electron-Documentation-Docs-All-Accelerator-Define-keyboard-shortcuts.-Accelerators-are-Str'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
Checking out the ref
/usr/bin/git log -1 --format='%H'
'033947fe6eb9f8600e4a6248a4bfb564df4dd4bd'
0s
Run echo Hello, world!
Hello, world!
0s
Run echo Add other actions to build,
Add other actions to build,
test, and deploy your project.
0s
Post job cleanup.
/usr/bin/git version
git version 2.30.2
/usr/bin/git config --local --name-only --get-regexp core.sshCommand
/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core.sshCommand' && git config --local --unset-all 'core.sshCommand' || :
/usr/bin/git config --local --name-only --get-regexp http.https://github.com/.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http.https://github.com/.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :
0s
Cleaning up orphan processes
}
}
}
}
}
}
}
}

name: demo-workflow
on:
push:
jobs:
test:
runs-on: ${{ matrix.os }}
strategy:
fail-fast: false
matrix:
os: [macos-latest, ubuntu-latest]
steps:
- uses: actions/checkout@v1
- uses: actions/setup-node@v1
with:
node-version: 12
- run: npm install -g bats
- run: bats tests

gitian-builder/bin/pyper/user/bin/bin/
set -curl
#fetch::-c++
#:runs-on::
fedora@v0.6.1
#:runs-on::=ubuntu-latest
windowsx89LinuxX32
#:Const::
#:=amd64
#:Echo::hello-World!
#:"Results""true" do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"_USER_CREATE = "1" ];
Name::**

-c "sudo useradd -m -s /bin/bash $DISTRO"
VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clea# echo $OUT already exists, please remove it first
**env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
**#**Fix::All::

  if bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
  fi
fi

fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap-fixup is done on first boot

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
github /
pages-gem

196
1.6k

342

Code
Issues 45
Pull requests 15
Actions
Projects
Security

Insights

pages-gem/.github/workflows/push.yml
@parkr
parkr Upgrade to Ruby 2.7
Latest commit 6e2f2ab on Jul 20, 2020
History
1 contributor
18 lines (18 sloc) 360 Bytes
on: push
name: cibuild on push
jobs:
build:
name: "GitHub Pages Tests"
runs-on: ubuntu-latest
strategy:
matrix:
ruby:
- 2.5
- 2.6
- 2.7
steps:
- uses: actions/checkout@master
- name: script/cibuild-docker
run: script/cibuild-docker
env:

Skip to content
Pull requests
Issues
Marketplace
Explore
@zachrytwood
Learn Git and GitHub without any code!

Using the Hello World guide, you’ll start a branch, write comments, and open a pull request.
devrandom /
gitian-builder

36
368

256

Code
Issues 39
Pull requests 5
Actions
Projects
Wiki
Security

Insights

gitian-builder/bin/make-base-vm
@rikublock
rikublock add disk size option
Latest commit 155ffe5 on Aug 17, 2019
History
16 contributors
@josephbisch
@devrandom
@TheBlueMatt
@MarcoFalke
@achow101
@tuaris
@tlrobinson
@rikublock
@laanwj
@ageis
@hyc
@gdm85
executable file 304 lines (262 sloc) 9.28 KB
#!/bin/sh
set -e

DISTRO=ubuntu
SUITE=xenial
ARCH=amd64
DISKSIZE=12287
LXC=0
VBOX=0
DOCKER=0
DOCKER_IMAGE_HASH=""

usage() {
echo "Usage: ${0##*/} [OPTION]..."
echo "Make a base client."
echo
cat << EOF
--help display this help and exit
--distro D build distro D (e.g. debian) instead of ubuntu
--suite U build suite U instead of xenial
--arch A build architecture A (e.g. i386) instead of amd64
--disksize S disk/image size S in MB (default 12287)
--lxc use lxc instead of kvm
--vbox use VirtualBox instead of kvm
--docker use docker instead of kvm
--docker-image-hash D digest of the docker image to build from
The MIRROR_HOST environment variable can be used to change the
apt-cacher host. It should be something that both the host and the
target VM can reach. It may be set to 127.0.0.1, in which case it will be
changed to 10.0.2.2 on the guest (or GITIAN_HOST_IP if it is defined)
10.0.2.2 is the host IP as visible from the guest under qemu networking.
The DEBOOTSTRAP_DIR (but also GITIAN_SUDO_USE_DEBOOTSTRAP_DIR, see below!)
environment variable can be set to select a directory
that will contain data like in "/usr/share/debootstrap/". This allows user to
make a copy of this files to some local dir and modify them locally:
e.g. set env variable "DEBOOTSTRAP_DIR=./mydeboot/", then copy or link
system's version of files there, and modify them there
(e.g. copy your debootstrap-script file "xenial" to "./mydeboot/scripts/").
Set env GITIAN_SUDO_USE_DEBOOTSTRAP_DIR="yes" to allow sudo for debootstrap
to use flags like --preserve-env that are required for DEBOOTSTRAP_DIR to work.
It must be equal string "yes".
This is done as separate variable to make it clear that we modify sudo
behaviour here regarding security (though anyway env is cleared with
whitelist so should be perfectly safe).
The --docker-image-hash option can be used to specify the hash of a particular
base image to use. These hashes can be found under the "RepoDigests" field of
"docker image inspect ". They will be reported in the form "sha256:";
only need the part is needed
EOF
}

if [ $# != 0 ] ; then
while true ; do
case "$1" in
--help|-h)
usage
exit 0
;;
--distro|-d)
DISTRO="$2"
shift 2
;;
--suite|-s)
SUITE="$2"
shift 2
;;
--arch|-a)
ARCH="$2"
shift 2
;;
--disksize)
DISKSIZE="$2"
shift 2
;;
--lxc)
LXC=1
shift 1
;;
--vbox)
VBOX=1
shift 1
;;
--docker)
DOCKER=1
shift 1
;;
--docker-image-digest)
DOCKER_IMAGE_HASH="$2"
shift 2
;;
--*)
echo "unrecognized option $1"
exit 1
;;
*)
break
;;
esac
done
fi

if [ $DOCKER = "1" ]; then
MIRROR_DEFAULT=172.17.0.1
else
MIRROR_DEFAULT=127.0.0.1
fi
MIRROR_BASE=http://${MIRROR_HOST:-$MIRROR_DEFAULT}:3142

if [ $DISTRO = "ubuntu" ]; then
MIRROR=$MIRROR_BASE/archive.ubuntu.com/ubuntu
SECURITY_MIRROR=$MIRROR_BASE/security.ubuntu.com/ubuntu
components=main,universe
elif [ $DISTRO = "debian" ]; then
MIRROR=$MIRROR_BASE/ftp.debian.org/debian
SECURITY_MIRROR=$MIRROR_BASE/security.debian.org/
components=main,contrib
fi

mkdir -p var

if [ ! -e var/id_rsa ]; then
ssh-keygen -t rsa -f var/id_rsa -N ""
fi

OUT=base-$SUITE-$ARCH
FLAVOUR=virtual

if [ $ARCH = "amd64" -a $SUITE = "hardy" ]; then
FLAVOUR=server
fi

if [ $DISTRO = "debian" -a $ARCH = "amd64" ]; then
FLAVOUR=amd64
elif [ $DISTRO = "debian" -a $ARCH = "i386" -a ($SUITE = "squeeze" -o $SUITE = "lenny" -o $SUITE = "etch" -o $SUITE = "sarge" -o $SUITE = "woody" -o $SUITE = "potato" -o $SUITE = "slink" -o $SUITE = "hamm" -o $SUITE = "bo" -o $SUITE = "rex" -o $SUITE = "buzz") ]; then
FLAVOUR=686
elif [ $DISTRO = "debian" ]; then
FLAVOUR=686-pae
fi

LOCALE_PKG=language-pack-en
if [ $DISTRO = "debian" ]; then
LOCALE_PKG=locales
fi

addpkg=pciutils,build-essential,git,subversion,$LOCALE_PKG,wget,lsb-release

if [ $DISTRO = "ubuntu" ]; then
Need comma at end to work around an issue with apt for Debian <= Wheezy regarding empty strings
If we left the comma down below when adding KERNEL_PKG to addpkg, the fact that KERNEL_PKG is undefined
if DISTRO is debian would result in two commas in a row (,,), which is interpreted by apt-get as the
package with the name empty string (""). This triggers a bug with apt versions < 1.0.3. So by adding the
comma to the end of KERNEL_PKG, we are including that comma if the distro is ubuntu (and therefore we do
have a kernel package that needs to be installed). If KERNEL_PKG is not set (i.e. we have Debian as the
distro), then we don't add that extra comma and therefore, we don't end up with two commas in a row.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=744940
http://anonscm.debian.org/cgit/apt/apt.git/commit/?h=1.0.3&id=d99854cac4065bc7b337815fb2116269d58dab73

KERNEL_PKG=linux-image-generic,
fi

GRUB_PKG=grub
if [ $DISTRO = "ubuntu" ]; then
GRUB_PKG=grub-pc
fi

if [ $LXC = "1" ]; then
addpkg=$addpkg,lxc
if [ $DISTRO = "debian" ]; then
addpkg=$addpkg,sudo
fi
else
Lack of comma after KERNEL_PKG is not a typo

addpkg=$addpkg,${KERNEL_PKG}${GRUB_PKG},openssh-server
fi
Remove cron to work around vmbuilder issue when umounting /dev on target

removepkg=cron

if [ $DOCKER = "1" ]; then

addpkg=echo $addpkg | tr ',' ' '

mkdir -p docker
cd docker

if [ -n "$DOCKER_IMAGE_HASH" ]; then
base_image="$DISTRO@sha256:$DOCKER_IMAGE_HASH"
OUT=base-$DOCKER_IMAGE_HASH-$ARCH
else
base_image="$DISTRO:$SUITE"
fi
Generate the dockerfile

cat << EOF > $OUT.Dockerfile
FROM $base_image
ENV DEBIAN_FRONTEND=noninteractive
RUN echo 'Acquire::http { Proxy "$MIRROR_BASE"; };' > /etc/apt/apt.conf.d/50cacher
RUN apt-get update && apt-get --no-install-recommends -y install $addpkg
RUN useradd -ms /bin/bash -U $DISTRO
USER $DISTRO:$DISTRO
WORKDIR /home/$DISTRO
CMD ["sleep", "infinity"]
EOF

docker build --pull -f $OUT.Dockerfile -t $OUT .

exit 0
fi

if [ $VBOX = "1" ]; then
NAME="$SUITE-$ARCH"
if ! vagrant status | grep "$NAME" | grep "not created" > /dev/null; then
echo "Vagrant machine "$NAME" already exists, please remove it first (vagrant destroy "$NAME")"
exit 1
fi

DISTRO_USER_CREATE=0
if [ $DISTRO = "debian" ]; then
# we use a vagrant provider
DISTRO_USER_CREATE=1
fi

vagrant up "$NAME"
if [ $DISTRO_USER_CREATE = "1" ]; then
vagrant ssh "$NAME" -c "sudo useradd -m -s /bin/bash $DISTRO"
fi

vagrant ssh "$NAME" -c "sudo mkdir -p /root/.ssh && sudo chmod 700 /root/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /root/.ssh/authorized_keys'" < var/id_rsa.pub
vagrant ssh "$NAME" -c "sudo -u $DISTRO mkdir -p /home/$DISTRO/.ssh && sudo -u $DISTRO chmod 700 /home/$DISTRO/.ssh"
vagrant ssh "$NAME" -c "sudo sh -c 'cat >> /home/$DISTRO/.ssh/authorized_keys'" < var/id_rsa.pub

VBoxManage snapshot "Gitian-$NAME" take "Gitian-Clean"
vagrant suspend "$NAME"

exit 0
fi

if [ $LXC = "1" ]; then
if [ -e $OUT ]; then
echo $OUT already exists, please remove it first
exit 1
fi
sudo rm -rf $OUT-bootstrap
Need universe for lxc in lucid

unset preserve_env
if [ "$GITIAN_SUDO_USE_DEBOOTSTRAP_DIR" = "yes" ]; then
echo npm install eslint --save-dev
yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js

preserve_env=yes # if you would want to set false then unset this variable

fi
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 DEBOOTSTRAP_DIR="$DEBOOTSTRAP_DIR" sudo ${preserve_env+--preserve-env} debootstrap --arch=$ARCH --include=$addpkg --exclude=$removepkg --components=$components $SUITE $OUT-bootstrap $MIRROR
Fix lxc issue

if [ -f $OUT-bootstrap/usr/lib/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
else
if [ $ARCH = "amd64" ]
then
if [ -f $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/x86_64-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
else
if [ -f $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init ]
then
sudo cp $OUT-bootstrap/usr/lib/i386-linux-gnu/lxc/lxc-init $OUT-bootstrap/usr/sbin/init.lxc
fi
fi
fi
dd if=/dev/zero of=$OUT-lxc bs=1M count=1 seek=$DISKSIZE
/sbin/mkfs.ext4 -F $OUT-lxc
t=mktemp -d gitian.XXXXXXXX
sudo mount $OUT-lxc $t
sudo cp -a $OUT-bootstrap/* $t
sudo umount $t
rmdir $t

sudo rm -rf $OUT-bootstrap
mv $OUT-lxc $OUT
bootstrap-fixup is done in libexec/make-clean-vm

else
if [ -e $OUT.qcow2 ]; then
echo $OUT.qcow2 already exists, please remove it first
exit 1
fi
libexec/config-bootstrap-fixup

rm -rf $OUT
env -i LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8 sudo vmbuilder kvm $DISTRO --rootsize $DISKSIZE --arch=$ARCH --suite=$SUITE --addpkg=$addpkg --removepkg=$removepkg --ssh-key=var/id_rsa.pub --ssh-user-key=var/id_rsa.pub --mirror=$MIRROR --security-mirror=$SECURITY_MIRROR --dest=$OUT --flavour=$FLAVOUR --firstboot=pwd/target-bin/bootstrap-fixup
mv $OUT/*.qcow2 $OUT.qcow2
rm -rf $OUT
bootstrap
npm install eslint --save-dev
or

yarn add eslint --dev

You should then set up a configuration file, and the easiest way to do that is to use the --init flag:

$ npx eslint --init
or

$ yarn run eslint --init

Note: --init assumes you have a package.json file already. If you don't, make sure to run npm init or yarn init beforehand.

After that, you can run ESLint on any file or directory like this:

$ npx eslint yourfile.js
or

$ yarn run eslint yourfile.js
#:Build::
#:Const::DOCKER.Gui
type::Container@ZachryTylerWood@Administrator@.git/paradice**
Const::git.github.secrets.((c)(r)).item.id.34173.
Const::Build::@zachrytwoodiii

Build::
@zachrytwood


 The module '/path/to/native/module.node'
was compiled against a different Node.js version using
NODE_MODULE_VERSION $XYZ. This version of Node.js requires
NODE_MODULE_VERSION $ABC. Please try re-compiling or re-installing
the module (for instance, using `npm rebuild` or `npm install`).
```

## How to install native modules

There are several different ways to install native modules:

### Installing modules and rebuilding for Electron

You can install modules like other Node projects, and then rebuild the modules
for Electron with the [`electron-rebuild`][electron-rebuild] package. This
module can automatically determine the version of Electron and handle the
manual steps of downloading headers and rebuilding native modules for your app.
If you are using [Electron Forge][electron-forge], this tool is used automatically
in both development mode and when making distributables.

For example, to install the standalone `electron-rebuild` tool and then rebuild
modules with it via the command line:

```sh
npm install --save-dev electron-rebuild

# Every time you run "npm install", run this:
./node_modules/.bin/electron-rebuild

# If you have trouble on Windows, try:
.\node_modules\.bin\electron-rebuild.cmd
```

For more information on usage and integration with other tools such as [Electron
Packager][electron-packager], consult the project's README.

### Using `npm`

By setting a few environment variables, you can use `npm` to install modules
directly.

For example, to install all dependencies for Electron:

```sh
# Electron's version.
export npm_config_target=1.2.3
# The architecture of Electron, see https://electronjs.org/docs/tutorial/support#supported-platforms
# for supported architectures.
export npm_config_arch=x64
export npm_config_target_arch=x64
# Download headers for Electron.
export npm_config_disturl=https://electronjs.org/headers
# Tell node-pre-gyp that we are building for Electron.
export npm_config_runtime=electron
# Tell node-pre-gyp to build module from source code.
export npm_config_build_from_source=true
# Install all dependencies, and store cache to ~/.electron-gyp.
HOME=~/.electron-gyp npm install
```

### Manually building for Electron

If you are a developer developing a native module and want to test it against
Electron, you might want to rebuild the module for Electron manually. You can
use `node-gyp` directly to build for Electron:

```sh
cd /path-to-module/
HOME=~/.electron-gyp node-gyp rebuild --target=1.2.3 --arch=x64 --dist-url=https://electronjs.org/headers
```

* `HOME=~/.electron-gyp` changes where to find development headers.
* `--target=1.2.3` is the version of Electron.
* `--dist-url=...` specifies where to download the headers.
* `--arch=x64` says the module is built for a 64-bit system.

### Manually building for a custom build of Electron

To compile native Node modules against a custom build of Electron that doesn't
match a public release, instruct `npm` to use the version of Node you have bundled
with your custom build.

```sh
npm rebuild --nodedir=/path/to/electron/vendor/node
```

## Troubleshooting

If you installed a native module and found it was not working, you need to check
the following things:

* When in doubt, run `electron-rebuild` first.
* Make sure the native module is compatible with the target platform and
  architecture for your Electron app.
* Make sure `win_delay_load_hook` is not set to `false` in the module's `binding.gyp`.
* After you upgrade Electron, you usually need to rebuild the modules.

### A note about `win_delay_load_hook`

On Windows, by default, `node-gyp` links native modules against `node.dll`.
However, in Electron 4.x and higher, the symbols needed by native modules are
exported by `electron.exe`, and there is no `node.dll`. In order to load native
modules on Windows, `node-gyp` installs a [delay-load
hook](https://msdn.microsoft.com/en-us/library/z9h1h6ty.aspx) that triggers
when the native module is loaded, and redirects the `node.dll` reference to use
the loading executable instead of looking for `node.dll` in the library search
path (which would turn up nothing). As such, on Electron 4.x and higher,
`'win_delay_load_hook': 'true'` is required to load native modules.

If you get an error like `Module did not self-register`, or `The specified
procedure could not be found`, it may mean that the module you're trying to use
did not correctly include the delay-load hook.  If the module is built with
node-gyp, ensure that the `win_delay_load_hook` variable is set to `true` in
the `binding.gyp` file, and isn't getting overridden anywhere.  If the module
is built with another system, you'll need to ensure that you build with a
delay-load hook installed in the main `.node` file. Your `link.exe` invocation
should look like this:

```plaintext
 link.exe /OUT:"foo.node" "...\node.lib" delayimp.lib /DELAYLOAD:node.exe /DLL
     "my_addon.obj" "win_delay_load_hook.obj"
```

In particular, it's important that:

* you link against `node.lib` from _Electron_ and not Node. If you link against
  the wrong `node.lib` you will get load-time errors when you require the
  module in Electron.
* you include the flag `/DELAYLOAD:node.exe`. If the `node.exe` link is not
  delayed, then the delay-load hook won't get a chance to fire and the node
  symbols won't be correctly resolved.
* `win_delay_load_hook.obj` is linked directly into the final DLL. If the hook
  is set up in a dependent DLL, it won't fire at the right time.

See [`node-gyp`](https://github.com/nodejs/node-gyp/blob/e2401e1395bef1d3c8acec268b42dc5fb71c4a38/src/win_delay_load_hook.cc)
for an example delay-load hook if you're implementing your own.

## Modules that rely on `prebuild`

[`prebuild`](https://github.com/prebuild/prebuild) provides a way to publish
native Node modules with prebuilt binaries for multiple versions of Node
and Electron.

If the `prebuild`-powered module provide binaries for the usage in Electron,
make sure to omit `--build-from-source` and the `npm_config_build_from_source`
environment variable in order to take full advantage of the prebuilt binaries.

## Modules that rely on `node-pre-gyp`

The [`node-pre-gyp` tool][node-pre-gyp] provides a way to deploy native Node
modules with prebuilt binaries, and many popular modules are using it.

Sometimes those modules work fine under Electron, but when there are no
Electron-specific binaries available, you'll need to build from source.
Because of this, it is recommended to use `electron-rebuild` for these modules.

If you are following the `npm` way of installing modules, you'll need to pass
`--build-from-source` to `npm`, or set the `npm_config_build_from_source`
environment variable.

[abi]: https://en.wikipedia.org/wiki/Application_binary_interface
[electron-rebuild]: https://github.com/electron/electron-rebuild
[electron-forge]: https://electronforge.io/
[electron-packager]: https://github.com/electron/electron-packager
[node-pre-gyp]: https://github.com/mapbox/node-pre-gyp
