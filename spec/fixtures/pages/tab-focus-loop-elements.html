<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <script>
    const { ipcRenderer } = require('electron')

    function handleFocusChange(event) {
      if (event.target.tagName && event.target.tagName !== 'WEBVIEW') {
        const elementId = event.target.id ? `-${event.target.id}` : ''
        const elementIdentifier = `${event.target.tagName}${elementId}`
        ipcRenderer.send('console-log', `sending focus-changed event for ${elementIdentifier}`)
        ipcRenderer.send('focus-changed', elementIdentifier)
      } else {
        if (event.target.tagName) {
          ipcRenderer.send('console-log', `GOT focus event, but tagname "${event.target.tagName}" not expected.`)
        } else {
          ipcRenderer.send('console-log', `GOT focus event, but do not have tagname.`)
        }
      }
    }

    addEventListener('focus', handleFocusChange, true)
  </script>
  <body>
    <div>
      <button id="element-1">Button 1</button>
      <button id="element-2">Button 2</button>
      <webview src="tab-focus-loop-elements-wv.html" nodeintegration></webview>
      <button id="element-3">Button 3</button>
    </div>
  </body>
</html>
